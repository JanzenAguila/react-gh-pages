{"version":3,"sources":["Assets/InitLogo.png","config.js","pages/GameInterface.js","pages/Login/Login.js","pages/Signup/Signup.js","pages/NotFound/NotFound.js","pages/Embed/Embed.js","pages/About/About.js","pages/Logout/Logout.js","nav/Navbar.js","App.js","useToken.js","serviceWorker.js","index.js"],"names":["module","exports","SERVER","GameInterface","props","addElementModel","d","filterTextName","name","length","substring","contextMenuOpen","a","async","updateSkipID","treeRef","_data","updateSkipIDCondition","updateID","resetModified","contextMenuClose","selectImageLink","getContextMenu","e","title","action","openModal","enabled","id","alert","parent","children","expandAllElements","update","collapseAllElements","treeRenderedCallback","state","alias","pages","data","loading","treeConfig","margin","top","right","bottom","left","textMargin","duration","nodeSize","loadGameInterface","bind","formatData","click","updateTree","printData","saveData","treeRefView","findParent","compare","updateName","convertTreeToList","findNode","addCondition","deleteCondition","changeConditionVisibility","embedGameContainer","clipboardCopy","gameName","sessionStorage","getItem","window","addEventListener","storageArea","clear","element","document","createElement","href","body","appendChild","axios","get","then","response","result","setState","variables","variableConditions","sort","catch","arr","query","i","attributes","this","currentnode","undefined","forEach","c","modified","modifiedConditions","skipto","newSkip","newSkipCond","parseInt","hasOwnProperty","prev_page","b","page_num","event","tree","arrsort","key","scheme","content","replace","decision","depth","nodeSound","push","count","temp2","page_num_id","variable_content","temp3","tempConditionArr","condition_content","split","root","stack","array","node","pop","nodeAdjust","entry","game_id","pagesFormat","post","res","link","getElementById","iframeLink","currentURL","location","value","String","select","execCommand","innerHTML","type","modal","nodeContent","nodeTitle","inherit","vars","span","getElementsByClassName","confirm","cancel","tempArr","skipChoice","variableContainer","viewConditions","style","display","options","option","text","add","str","textContent","selected","selectedIndex","counter","toRestore","checked","contentCpy","nodeFound","conditionStr","conditionCounter","hideText","optionsTransfer","removeCondition","conditionLink","removeChild","firstChild","onclick","thisCopy","newEntry","newParent","splice","skipTo","variableArrCheck","variableConditionsArrCheck","conditionArr","hide","addNode","skipCheck","variableArray","updateNodeText","removeNode","removeChildren","target","conditionSpan","temp1","outerHTML","backupArr","newDiv","className","addListenerParent","deleteBtnArray","idStr","toString","optionsSkip","n","optionValue","j","parentNode","remove","force","config","url","download","newName","onChange","width","height","border","treeData","onRef","ref","placeholder","class","color","minHeight","size","onInput","float","paddingRight","onClick","disabled","readonly","exportGame","Component","loginUser","credentials","fetch","method","headers","JSON","stringify","json","Login","setToken","useState","username","setUserName","password","setPassword","onSubmit","aliasCheck","passCheck","check","preventDefault","opacity","token","authStr","tokenStr","setItem","moddedToken","getAttribute","setAttribute","createGame","console","log","Signup","pass","login","validityCheck","temp_alias","setTimeout","setAlias","setName","NotFound","Embed","useParams","path","src","rel","About","sidebar","setSidebar","Date","getFullYear","onMouseOver","onMouseOut","require","alt","Logout","Navbar","showSidebar","Provider","to","App","tokenString","userToken","parse","getToken","useToken","gameNameMod","exact","textAlign","position","fontSize","component","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9243bfb6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/InitLogo.343666ef.png\";","export const SERVER = \"http://3.0.227.209:443\";\r\n// export const SERVER = \"http://localhost:3001\";\r\nexport const ADMIN_UNAME = \"admin\";\r\nexport const ADMIN_PW = \"admin\";","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n// import { Tree } from 'react-d3-tree';\r\nimport TreeEditor from 'react-d3-tree-editor';\r\n\r\nimport { SERVER } from '../config.js';\r\n\r\nimport '../style.css';\r\n\r\nclass GameInterface extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tid: '',\r\n\t\t\tname: '',\r\n\t\t\talias: '',\r\n\t\t\tpages: [],\r\n\t\t\tdata: '',\r\n\t\t\tloading: true,\r\n\t\t}\r\n\r\n\t\tthis.treeRef = null;\r\n\r\n\t\tthis.treeConfig = {\r\n\t\t\t//the d3 tree config \r\n\t\t\tmargin: {\r\n\t\t\t\ttop: 20,\r\n\t\t\t\tright: 120,\r\n\t\t\t\tbottom: 20,\r\n\t\t\t\tleft: 120\r\n\t\t\t},\r\n\t\t\ttextMargin: 20,\r\n\t\t\tduration: 750,\r\n\t\t\tnodeSize: [40, 70]\r\n\t\t}\r\n\r\n\t\tthis.loadGameInterface = this.loadGameInterface.bind(this);\r\n\t\tthis.formatData = this.formatData.bind(this);\r\n\t\tthis.click = this.click.bind(this);\r\n\t\tthis.updateTree = this.updateTree.bind(this);\r\n\t\tthis.printData = this.printData.bind(this);\r\n\t\tthis.saveData = this.saveData.bind(this);\r\n\t\tthis.treeRefView = this.treeRefView.bind(this);\r\n\t\tthis.findParent = this.findParent.bind(this);\r\n\t\tthis.compare = this.compare.bind(this);\r\n\t\tthis.updateName = this.updateName.bind(this);\r\n\r\n\t\tthis.convertTreeToList = this.convertTreeToList.bind(this);\r\n\r\n\t\tthis.resetModified = this.resetModified.bind(this);\r\n\t\tthis.findNode = this.findNode.bind(this);\r\n\t\tthis.openModal = this.openModal.bind(this);\r\n\t\tthis.updateID = this.updateID.bind(this);\r\n\t\tthis.updateSkipID = this.updateSkipID.bind(this);\r\n\t\tthis.updateSkipIDCondition = this.updateSkipIDCondition.bind(this);\r\n\t\tthis.addCondition = this.addCondition.bind(this);\r\n\t\tthis.deleteCondition = this.deleteCondition.bind(this);\r\n\t\tthis.changeConditionVisibility = this.changeConditionVisibility.bind(this);\r\n\t\tthis.embedGameContainer = this.embedGameContainer.bind(this);\r\n\t\tthis.clipboardCopy = this.clipboardCopy.bind(this);\r\n\r\n\t\tthis.loadGameInterface();\r\n\t}\r\n\r\n\tloadGameInterface(e) {\r\n\t\tlet gameName = sessionStorage.getItem(\"gameName\");\r\n\t\twindow.addEventListener('storage', function(e){\r\n\t\t\tif(e.storageArea === sessionStorage){\r\n\t\t\t\talert(\"You have modified something that shouldn't be modified. You will now be logged out.\");\r\n\t\t\t\tsessionStorage.clear();\r\n\t\t\t\tconst element = document.createElement(\"a\");\r\n\t\t\t\telement.href = \"/\";\r\n\t\t\t\tdocument.body.appendChild(element);\r\n\t\t\t\telement.click();\r\n\t\t\t}\r\n\t\t\t// else, event is caused by an update to localStorage, ignore it\r\n\t\t});\r\n\t\taxios.get(SERVER + '/game/' + gameName)\r\n\t\t\t.then((response) => response.data)\r\n\t\t\t.then((result) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tid: result[1].id,\r\n\t\t\t\t\tname: result[1].name,\r\n\t\t\t\t\talias: result[1].alias,\r\n\t\t\t\t\tpages: result[0],\r\n\t\t\t\t\tvariables: result[2],\r\n\t\t\t\t\tvariableConditions: result[3],\r\n\t\t\t\t});\r\n\t\t\t\t// console.log(this.state);\r\n\t\t\t\t// console.log(this.state.pages);\r\n\t\t\t\tthis.state.pages.sort(this.compare);\r\n\t\t\t\tthis.formatData();\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\t// console.log(\"Error\");\r\n\t\t\t});\r\n\t}\r\n\r\n\tfindParent(arr, query) {\r\n\t\tfor(var i in arr) {\r\n\t\t\tif(arr[i].attributes.id === query) {\r\n\t\t\t\tvar temp = arr[i];\r\n\t\t\t\treturn temp;\r\n\t\t\t} else {\r\n\t\t\t\tif(arr[i].children === []){\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.findParent(arr[i].children, query);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfindNode(currentnode, id) {\r\n\t\tlet result = undefined;\r\n\r\n\t\t// if (result !== undefined && currentnode.attributes.id === id){\r\n\t\tif (currentnode.attributes.id === id){\r\n\t\t\tresult = currentnode;\r\n\t\t}\r\n\t\t// if (result !== undefined && currentnode.children) {\r\n\t\tif (currentnode.children) {\r\n\t\t\tcurrentnode.children.forEach(c => {\r\n\t\t\t\tif (!result) result = this.findNode(c, id)\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresetModified(currentnode) {\r\n\t\tcurrentnode.attributes.modified = 0;\r\n\t\tcurrentnode.attributes.modifiedConditions = 0;\r\n\t\t// let toReset = this.findNode(this.treeRef._data, currentnode.id);\r\n\t\t// toReset.attributes.modified = 0;\r\n\r\n\t\tif (currentnode.children) {\r\n\t\t\tcurrentnode.children.forEach(c => {\r\n\t\t\t\tthis.resetModified(c)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tasync updateSkipID(currentnode) {\r\n\t\tif(currentnode.attributes.skipto !== -1 && currentnode.attributes.modified === 0) {\r\n\t\t\tvar newSkip = this.findNode(this.treeRef._data, currentnode.attributes.skipto);\r\n\t\t\tif(newSkip === undefined) {\r\n\t\t\t\talert(\"This item's skip value has been deleted. Skip value reset.\")\r\n\t\t\t\tcurrentnode.attributes.skipto = -1;\r\n\t\t\t}\r\n\t\t\telse\tcurrentnode.attributes.skipto = newSkip.id;\r\n\t\t\tcurrentnode.attributes.modified = 1;\r\n\t\t}\r\n\t\tif (currentnode.children) {\r\n\t\t\tcurrentnode.children.forEach(c => {\r\n\t\t\t\tthis.updateSkipID(c)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tasync updateSkipIDCondition(currentnode) {\r\n\t\tif(currentnode.attributes.variableConditions !== undefined) {\r\n\t\t\tif(currentnode.attributes.variableConditions.length > 0 && currentnode.attributes.modifiedConditions === 0) {\r\n\t\t\t\tfor(let i = 0; i < currentnode.attributes.variableConditions.length; i++) {\r\n\t\t\t\t\tif(currentnode.attributes.variableConditions[i][1] === \"None\") {\r\n\t\t\t\t\t\tcurrentnode.attributes.variableConditions[i][1] = \"None\";\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet newSkipCond = this.findNode(this.treeRef._data, parseInt(currentnode.attributes.variableConditions[i][1]));\r\n\t\t\t\t\tif(newSkipCond === undefined) {\r\n\t\t\t\t\t\talert(\"This item's skip conditions encountered an error.\")\r\n\t\t\t\t\t\tcurrentnode.attributes.variableConditions[i][1] = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\tcurrentnode.attributes.variableConditions[i][1] = newSkipCond.id;\r\n\t\t\t\t\tcurrentnode.attributes.modifiedConditions = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (currentnode.children) {\r\n\t\t\tcurrentnode.children.forEach(c => {\r\n\t\t\t\tthis.updateSkipIDCondition(c)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tupdateID(currentnode) {\r\n\t\tcurrentnode.attributes.id = currentnode.id;\r\n\t\tif(currentnode.hasOwnProperty(\"parent\"))\r\n\t\t\tcurrentnode.attributes.prev_page = currentnode.parent.id;\r\n\t\tif (currentnode.children) {\r\n\t\t\tcurrentnode.children.forEach(c => {\r\n\t\t\t\tthis.updateID(c)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// sorting for page_num before they get translated to a tree\r\n\t// Modified from source: https://stackoverflow.com/a/1129270\r\n\tcompare(a, b) {\r\n\t\tif (a.page_num < b.page_num) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a.page_num >= b.page_num) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tformatData(event) {\r\n\t\tvar tree = \"\";\r\n\t\tvar arrsort = [];\r\n\t\tfor(var key in this.state.pages) {\r\n\t\t\tvar scheme = {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"title\": \"\",\r\n\t\t\t\t\t\"decision\": \"\",\r\n\t\t\t\t\t\"prev_page\": \"\",\r\n\t\t\t\t\t\"depth\": \"\",\r\n\t\t\t\t\t\"skipto\": -1,\r\n\t\t\t\t\t\"variables\": [],\r\n\t\t\t\t\t\"variableConditions\": [],\r\n\t\t\t\t\t\"nodeSound\": \"\",\r\n\t\t\t\t\tmodified: 0,\r\n\t\t\t\t\tmodifiedConditions: 0,\r\n\t\t\t\t},\r\n\t\t\t\t\"children\": []\r\n\t\t\t}\r\n\t\t\tscheme.name = this.state.pages[key].content;\r\n\t\t\tscheme.name = scheme.name.replace(/''/g, \"'\"); // change the quotes in the entries saved in the database\r\n\t\t\tscheme.attributes.id = this.state.pages[key].page_num;\r\n\t\t\tscheme.attributes.title = this.state.pages[key].title;\r\n\t\t\tscheme.attributes.decision = this.state.pages[key].decision;\r\n\t\t\tscheme.attributes.prev_page = this.state.pages[key].prev_page;\r\n\t\t\tscheme.attributes.depth = this.state.pages[key].depth;\r\n\t\t\tscheme.attributes.skipto = this.state.pages[key].skipto;\r\n\t\t\tscheme.attributes.variables = this.state.pages[key].variables;\r\n\t\t\tscheme.attributes.variableConditions = this.state.pages[key].variableConditions;\r\n\t\t\tscheme.attributes.nodeSound = this.state.pages[key].nodeSound;\r\n\t\t\tarrsort.push(scheme);\r\n\t\t}\r\n\t\tvar count = 1;\r\n\t\ttree = this.findParent(arrsort, count);\r\n\t\tvar depth = 1;\r\n\t\tfor(var i in arrsort) {\r\n\t\t\tif(arrsort[i].attributes.depth === depth) {\r\n\t\t\t\ttree.children.push(arrsort[i]);\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdepth++;\r\n\t\twhile(arrsort.length > count) {\r\n\t\t\tfor(let i in arrsort) {\r\n\t\t\t\tif(arrsort[i].attributes.depth === depth) {\r\n\t\t\t\t\tvar temp = this.findNode(tree, arrsort[i].attributes.prev_page);\r\n\t\t\t\t\ttemp.children.push(arrsort[i]);\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdepth++;\r\n\t\t}\r\n\r\n\t\t// add the variables to every node\r\n\t\tfor(let i in this.state.variables) {\r\n\t\t\tvar temp2 = this.findNode(tree, this.state.variables[i].page_num_id);\r\n\t\t\tif(temp2.attributes.variables === undefined) {\r\n\t\t\t\ttemp2.attributes.variables = [this.state.variables[i].variable_content];\r\n\t\t\t}\r\n\t\t\telse\ttemp2.attributes.variables.push(this.state.variables[i].variable_content);\r\n\t\t}\r\n\r\n\t\t// add the conditions to every node\r\n\t\tfor(let i in this.state.variableConditions) {\r\n\t\t\tvar temp3 = this.findNode(tree, this.state.variableConditions[i].page_num_id);\r\n\t\t\tlet tempConditionArr = this.state.variableConditions[i].condition_content.split(\",\");\r\n\t\t\tif(temp3.attributes.variableConditions === undefined) {\r\n\t\t\t\ttemp3.attributes.variableConditions = [tempConditionArr];\r\n\t\t\t}\r\n\t\t\telse\ttemp3.attributes.variableConditions.push(tempConditionArr);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tdata: tree,\r\n\t\t\tloading: false\r\n\t\t});\r\n\t\t// console.log(this.state.data);\r\n\t\treturn tree;\r\n\t}\r\n\r\n\t/**\r\n\t*  Pre-order tree traversal visits each node using stack. \r\n\t*  Checks if leaf node based on children === null otherwise \r\n\t*  pushes all children into stack and continues traversal. \r\n\t*  hashMap object literal used for deduping.\r\n\t*  @param root - deserialized JSON root to begin traversal\r\n\t*  @returns array  - final array of nodes in order with no dups\r\n\t*/\r\n\t// Modified function based on https://danmartensen.svbtle.com/converting-a-tree-to-a-list-in-javascript\r\n\tconvertTreeToList(root) {\r\n\t    var stack = [], array = [];\r\n\t    stack.push(root);\r\n\r\n\t    while(stack.length !== 0) {\r\n\t        var node = stack.pop();\r\n\t        var nodeAdjust = node.name.replace(/'/g, \"''\") // prevents errors from appearing is a user uses apostrophe in the content\r\n\t        var entry = {\r\n\t\t\t\tgame_id: this.state.id,\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tcontent: nodeAdjust,\r\n\t\t\t\tdecision: \"\",\r\n\t\t\t\tpage_num: node.id,\r\n\t\t\t\tprev_page: 0,\r\n\t\t\t\tdepth: node.depth,\r\n\t\t\t\tskipto: -1,\r\n\t\t\t\tvariables: [],\r\n\t\t\t\tvariableConditions: [],\r\n\t\t\t\tnodeSound: \"\",\r\n\t\t\t}\r\n\t\t\tif (node.attributes.title !== undefined)\r\n\t\t\t\tentry.title = node.attributes.title;\r\n\t\t\tif (node.attributes.decision !== undefined)\r\n\t\t\t\tentry.decision = node.attributes.decision;\r\n\t\t\tif (node.parent !== undefined) { // Not the root node\r\n\t\t\t\tentry.prev_page = node.parent.id;\r\n\t\t\t\tif (node.parent.children.length > 1)\r\n\t\t\t\t\tentry.decision = \"Y\";\r\n\t\t\t\telse\tentry.decision = \"N\";\r\n\t\t\t}\r\n\t\t\telse\tentry.decision = \"N\"; // There can only be one root node, so this can't be a decision node.\r\n\t\t\tif (node.skipto !== -1)\r\n\t\t\t\tentry.skipto = node.attributes.skipto;\r\n\t\t\tif(node.attributes.variables !== undefined)\r\n\t\t\t\tentry.variables = node.attributes.variables;\r\n\t\t\tif(node.attributes.variableConditions !== undefined)\r\n\t\t\t\tentry.variableConditions = node.attributes.variableConditions;\r\n\t        if (node.attributes.nodeSound !== undefined || node.attributes.nodeSound !== \"\")\r\n\t\t\t\tentry.nodeSound = node.attributes.nodeSound;\r\n\t        array.push(entry);\r\n\t        if(node.children === undefined || node.children.length === 0)\r\n\t            continue;\r\n\t        else {\r\n\t            for(var i = node.children.length - 1; i >= 0; i--) {\r\n\t                stack.push(node.children[i]);\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    return array;\r\n\t}\r\n\r\n\tsaveData(e) {\r\n\t\tthis.updateSkipID(this.treeRef._data);\r\n\t\tthis.updateSkipIDCondition(this.treeRef._data);\r\n\t\tthis.updateID(this.treeRef._data);\r\n\r\n\t\tthis.setState({\r\n\t\t\tdata: this.treeRef._data\r\n\t\t});\r\n\t\tvar pagesFormat = [];\r\n\t\tvar entry = this.treeRef._data;\r\n\t\tpagesFormat = this.convertTreeToList(entry);\r\n\t\taxios.post(SERVER + '/game/save/' + this.state.name, {\r\n\t\t\tid: this.state.id,\r\n\t\t\tname: this.state.name,\r\n\t\t\talias: this.state.alias,\r\n\t\t\tpages: pagesFormat,\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\t// console.log(res.data);\r\n\t\t\t\talert(\"Success\");\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\t// console.log(\"Failed\")\r\n\t\t\t});\r\n\t}\r\n\r\n\ttreeRefView(e) {\r\n\t\t// this.treeRef._data = this.state.data;\r\n\t\t// this.treeRef.update(e);\r\n\t\t// console.log(\"Data reset\");\r\n\t\t// console.log(this.treeRef);\r\n\t}\r\n\r\n\tclick(event) {\r\n\t\tthis.setState({ data: event });\r\n\t}\r\n\r\n\tupdateTree(event) {\t\t\r\n\t\t// console.log(\"1\");\r\n\t}\r\n\r\n\tprintData(event) {\r\n\t\t// console.log(\"1\");\r\n\t\t// console.log(this.state);\r\n\t\t// console.log(this.treeRef._data);\r\n\t}\r\n\r\n\taddElementModel = (d) => {\r\n\t  // console.log('addElementModel');\r\n\t  //will be fired for opening a model edit node data\r\n\t}\r\n\r\n\r\n\tfilterTextName = (d) => {\r\n\t  //will be fired for each element once to decide which property be used to display the name \r\n\t  if(d.name.length > 25) {\r\n\t  \treturn d.name.substring(0,25) + \"...\";\r\n\t  }\r\n\t  else\r\n\t  \treturn d.name;\r\n\t}\r\n\r\n\r\n\tcontextMenuOpen = async (d) => {\r\n\t  // console.log('contextMenuOpen');\r\n\t  //will be fired when context menu opened\r\n\t  this.updateSkipID(this.treeRef._data)\r\n\t  this.updateSkipIDCondition(this.treeRef._data);\r\n\t  this.updateID(this.treeRef._data);\r\n\t  this.resetModified(this.treeRef._data);\r\n\t}\r\n\r\n\tcontextMenuClose = (d) => {\r\n\t  // console.log('contextMenuClose');\r\n\t  //will be fired when context menu closed\r\n\t}\r\n\r\n\tselectImageLink = (d) => {\r\n\t  //will be fired once for each element to decide the icon for that element\r\n\t  // return \"http://mojedelo.webfactional.com/img/ikone/mdikona4.png\"\r\n\t  // return \"../Assets/InitLogo_LetterOnly.png\";\r\n\t  return \"https://i.imgur.com/u5pJGKg.png\";\r\n\t}\r\n\r\n\tgetContextMenu = (e) => {\r\n\t  //will be fired on each element for attaching a context menu\r\n\t  return [{\r\n\t          title: 'View item details',\r\n\t          action: () => {\r\n\t          \t// console.log(e);\r\n\t          \t// this.updateSkipID(this.treeRef._data);\r\n\t          \t// this.updateSkipIDCondition(this.treeRef._data);\r\n\t          \t// this.updateID(this.treeRef._data);\r\n\t          \tthis.openModal(\"view\", e, this.treeRef);\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Add item',\r\n\t          action: () => {\r\n\t          \t// this.updateSkipID(this.treeRef._data);\r\n\t          \t// this.updateSkipIDCondition(this.treeRef._data);\r\n\t          \t// this.updateID(this.treeRef._data);\r\n\t          \tthis.openModal(\"add\", e, this.treeRef);\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Delete item',\r\n\t          action: () => {\r\n\t          \t// this.updateSkipID(this.treeRef._data);\r\n\t          \t// this.updateSkipIDCondition(this.treeRef._data);\r\n\t          \t// this.updateID(this.treeRef._data);\r\n\t          \tthis.openModal(\"delete\", e, this.treeRef);\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Edit item',\r\n\t          action: () => {\r\n\t           //  this.updateSkipID(this.treeRef._data);\r\n\t           //  this.updateSkipIDCondition(this.treeRef._data);\r\n\t          \t// this.updateID(this.treeRef._data);\r\n\t            this.openModal(\"edit\", e, this.treeRef);\r\n\t      \t  },\r\n\t      \t  enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Delete children',\r\n\t          action: () => {\r\n\t          \t// this.updateSkipID(this.treeRef._data);\r\n\t          \t// this.updateSkipIDCondition(this.treeRef._data);\r\n\t          \t// this.updateID(this.treeRef._data);\r\n\t          \tthis.openModal(\"deleteChildren\", e, this.treeRef);\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Transfer node',\r\n\t          action: () => {\r\n\t          \t// this.updateSkipID(this.treeRef._data);\r\n\t          \t// this.updateSkipIDCondition(this.treeRef._data);\r\n\t          \t// this.updateID(this.treeRef._data);\r\n\t          \tif(e.id === 1) {\r\n\t\t\t\t\talert(\"Invalid option! Can't transfer root node!\");\r\n\t\t\t\t}\r\n\t\t\t\telse if(e.parent.id === 1 && e.parent.children.length === 1){\r\n\t\t\t\t\talert(\"Invalid option! There can't be two root nodes\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.openModal(\"transfer\", e, this);\r\n\t\t\t\t}\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Expand all',\r\n\t          action: () => {\r\n\t          \tthis.treeRef.expandAllElements(e);\r\n\t          \tthis.treeRef.update(e);\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\t      {\r\n\t          title: 'Collapse all',\r\n\t          action: () => {\r\n\t          \tthis.treeRef.collapseAllElements(e);\r\n\t          \tthis.treeRef.update(e);\r\n\t          },\r\n\t          enabled: true\r\n\t      },\r\n\r\n\t  ];\r\n\t}\r\n\r\n\ttreeRenderedCallback = (d) => {\r\n\t  // console.log('treeRenderedCallback');\r\n\t  this.treeRef.expandAllElements(this.treeRef._data);\r\n\t  if(this.treeRef._data.name === \"Edit this content\")\r\n\t  \tthis.openModal(\"new\", \"event\", this.treeRef);\r\n\t  //will be fired when tree finish render\r\n\t}\r\n\r\n\tembedGameContainer(e) {\r\n\t\tlet link = document.getElementById(\"embedLinkText\");\r\n\t\tlet iframeLink = document.getElementById(\"embedLinkTextIframe\");\r\n\t\tlet currentURL = window.location.href;\r\n\t\tif(currentURL[currentURL.length-1] === \"#\")\r\n\t\t\tcurrentURL = currentURL.substring(0, currentURL.length-1);\r\n\t\tcurrentURL += this.state.alias;\r\n\r\n\t\tlink.value = currentURL;\r\n\t\tiframeLink.value = \"<iframe src=\\\"\" + currentURL + \"/\\\" frameborder=\\\"0\\\" style=\\\"display:block;border:none;height:auto;width:100%;\\\" name=\\\"textSimEngineEmbed\\\" allowfullscreen></iframe>\";\r\n\t\tthis.openModal(\"generateEmbed\", e, this.treeRef);\r\n\t}\r\n\r\n\tclipboardCopy(event) {\r\n\t\tlet copyText = document.getElementById(String(event));\r\n\t\tcopyText.select();\r\n\r\n\t\tdocument.execCommand(\"copy\"); /* Copy the text inside the text field */\r\n\t\tdocument.getElementById(\"copySuccess\").innerHTML = \"Successfully copied!\";\r\n\t}\r\n\r\n\topenModal(type, event, treeRef) {\r\n\t\tvar modal = document.getElementById(\"myModal\");\r\n\t\tvar content = document.getElementById(\"contentPlaceholder\");\r\n\t\tvar nodeContent = document.getElementById(\"nodeContent\");\r\n\t\tvar nodeTitle = document.getElementById(\"nodeTitle\");\r\n\t\tvar inherit = document.getElementById(\"varInherit\");\r\n\t\tvar vars = document.getElementById(\"varName\");\r\n\r\n\t\tvar span = document.getElementsByClassName(\"close\")[0]; // Get the <span> element that closes the modal\r\n\t\tvar confirm = document.getElementById(\"confirmBtn\");\r\n\t\tvar cancel = document.getElementById(\"cancelBtn\");\r\n\t\tvar tempArr = this.convertTreeToList(this.treeRef._data);\r\n\t\tif(type === \"delete\" || type === \"deleteChildren\") {\r\n\t\t\tmodal = document.getElementById(\"modalDelete\");\r\n\t\t\tcontent = document.getElementById(\"deletecontentPlaceholder\");\r\n\t\t\tconfirm = document.getElementById(\"confirmBtnDelete\");\r\n\t\t\tcancel = document.getElementById(\"cancelBtnDelete\");\r\n\t\t\tspan = document.getElementsByClassName(\"close\")[1];\r\n\t\t}\r\n\t\tif(type === \"view\") {\r\n\t\t\tmodal = document.getElementById(\"modalView\");\r\n\t\t\tnodeContent = document.getElementById(\"viewNodeContent\");\r\n\t\t\tnodeTitle = document.getElementById(\"viewNodeTitle\");\r\n\t\t\tvar skipChoice = document.getElementById(\"viewSkipChoice\");\r\n\t\t\tvar variableContainer = document.getElementById(\"viewVarName\");\r\n\t\t\tvar viewConditions = document.getElementById(\"viewRow\");\r\n\r\n\t\t\tcancel = document.getElementById(\"viewCancelBtn\");\r\n\t\t\tspan = document.getElementsByClassName(\"close\")[2];\r\n\t\t}\r\n\t\tif(type === \"generateEmbed\") {\r\n\t\t\tmodal = document.getElementById(\"modalEmbed\");\r\n\t\t\tspan = document.getElementsByClassName(\"close\")[3];\r\n\t\t\tconfirm = document.getElementById(\"generateBtnEmbed\");\r\n\t\t\tcancel = document.getElementById(\"closeBtnEmbed\");\r\n\t\t}\r\n\t\tif(type === \"new\") {\r\n\t\t\tmodal = document.getElementById(\"modalNew\");\r\n\t\t\tspan = document.getElementsByClassName(\"close\")[4];\r\n\t\t\tconfirm = document.getElementById(\"confirmBtnNew\");\r\n\t\t\tcancel = document.getElementById(\"cancelBtnNew\");\r\n\t\t}\r\n\t\tif(type === \"transfer\") {\r\n\t\t\tmodal = document.getElementById(\"modalTransfer\");\r\n\t\t\tspan = document.getElementsByClassName(\"close\")[5];\r\n\t\t\tconfirm = document.getElementById(\"confirmBtnTransfer\");\r\n\t\t\tcancel = document.getElementById(\"cancelBtnTransfer\");\r\n\t\t}\r\n\r\n\t\tmodal.style.display = \"block\";\r\n\r\n\t\tif(type === \"add\") {\r\n\t\t\tif(event.attributes.skipto !== -1) {\r\n\t\t\t\talert(\"You can no longer add another child node to a skip node.\");\r\n\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet options = document.getElementById(\"skipChoice\");\r\n\t\t\t\tfor (let i = (options.options.length)-1; i >= 0; i--) { // This clears options in case there is a change in the tree\r\n\t\t\t\t\toptions.options[i] = null;\r\n\t\t\t\t}\r\n\t\t\t\tlet option = document.createElement(\"option\");\r\n\t\t\t\toption.text = \"None\";\r\n\t\t\t\toptions.add(option);\r\n\t\t\t\tfor(let i in tempArr) {\r\n\t\t\t\t\toption = document.createElement(\"option\");\r\n\t\t\t\t\toption.text = tempArr[i].page_num + \": \" + tempArr[i].title;\r\n\t\t\t\t\toption.value = tempArr[i].page_num;\r\n\t\t\t\t\tif(tempArr[i].title.length > 50) {\r\n\t\t\t\t\t\tlet str = tempArr[i].page_num + \": \" + tempArr[i].title;\r\n\t\t\t\t\t\toption.text = str.substring(0,50) + \"...\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.add(option);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if parent has variables\r\n\t\t\t\tif(event.attributes.variables !== undefined) {\r\n\t\t\t\t\tinherit.textContent = \" (Parent node's variables have been inherited)\";\r\n\t\t\t\t\tvars.value = event.attributes.variables;\r\n\t\t\t\t\tvars.value = vars.value.replace(/input/g, \"\");\r\n\t\t\t\t\tvars.value = vars.value.replace(/[]/g, \"\\\"\");\r\n\t\t\t\t\tvars.value = vars.value.replace(/=\"[^\"]+\"/g, \"\")\r\n\t\t\t\t\tvars.value = vars.value.replace(/[-+*/=0-9]/g, \"\");\r\n\t\t\t\t\tthis.changeConditionVisibility(event,\"temp\");\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet vars = document.getElementById(\"varName\");\r\n\t\t\t\t\tvars.value = \"\";\r\n\t\t\t\t\tthis.changeConditionVisibility(event,\"close\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(type === \"edit\") {\r\n\t\t\tnodeTitle.value = event.attributes.title;\r\n\t\t\tdocument.getElementById(\"variableSuperClass\").style.display = \"block\";\r\n\t\t\tlet options = document.getElementById(\"skipChoice\");\r\n\t\t\tfor (let i = (options.options.length)-1; i >= 0; i--) { // This clears options in case there is a change in the tree\r\n\t\t\t\toptions.options[i] = null;\r\n\t\t\t}\r\n\t\t\tlet option = document.createElement(\"option\");\r\n\r\n\t\t\t// for skip part on main node\r\n\t\t\toption.text = \"None\";\r\n\t\t\toptions.add(option);\r\n\t\t\tvar selected = -1;\r\n\t\t\tfor(let i in tempArr) {\r\n\t\t\t\toption = document.createElement(\"option\");\r\n\t\t\t\tif(tempArr[i].title.length > 50) {\r\n\t\t\t\t\tlet str = tempArr[i].page_num + \": \" + tempArr[i].title;\r\n\t\t\t\t\toption.text = str.substring(0,50) + \"...\";\r\n\t\t\t\t}\r\n\t\t\t\telse option.text = tempArr[i].page_num + \": \" + tempArr[i].title;\r\n\t\t\t\toption.value = tempArr[i].page_num;\r\n\t\t\t\toptions.add(option);\r\n\t\t\t\tif(tempArr[i].page_num === event.attributes.skipto) {\r\n\t\t\t\t\tselected = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tselected = parseInt(selected)+1;\r\n\t\t\toptions.selectedIndex = selected;\r\n\t\t\tnodeContent = document.getElementById(\"nodeContent\");\r\n\t\t\tnodeContent.value = event.name;\r\n\r\n\t\t\tlet nodeSound = document.getElementById(\"nodeSound\");\r\n\t\t\tif(event.attributes.nodeSound !== \"\") {\r\n\t\t\t\tnodeSound.value = event.attributes.nodeSound;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnodeSound.value = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tif(event.attributes.variables === undefined)\t{\r\n\t\t\t\tvars.value = \"\";\r\n\t\t\t\tthis.changeConditionVisibility(event,\"close\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvars.value = event.attributes.variables;\r\n\t\t\t\tthis.changeConditionVisibility(event,\"temp\");\r\n\t\t\t\tif(event.attributes.variableConditions !== undefined) {\r\n\t\t\t\t\tfor(let counter = 0; counter < event.attributes.variableConditions.length; counter++)\r\n\t\t\t\t\t\tthis.addCondition(event);\r\n\t\t\t\t\tvar toRestore = document.getElementsByClassName(\"choiceConditions\");\r\n\t\t\t\t\tfor(let counter = 0; counter < event.attributes.variableConditions.length; counter++) {\r\n\t\t\t\t\t\ttoRestore[counter].children[1].value = event.attributes.variableConditions[counter][0];\r\n\t\t\t\t\t\ttoRestore[counter].children[2].value = event.attributes.variableConditions[counter][1];\r\n\t\t\t\t\t\tif(event.attributes.variableConditions[counter][2] === \"Hide\")\r\n\t\t\t\t\t\t\ttoRestore[counter].children[3].checked = true;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttoRestore[counter].children[3].checked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(type === \"deleteChildren\") {\r\n\t\t\tvar contentCpy = content.innerHTML;\r\n\t\t\tcontent.innerHTML = (\"This will delete the node's children. Are you sure?\")\r\n\t\t}\r\n\r\n\t\tif(type === \"view\") {\r\n\t\t\tnodeTitle.innerHTML = event.attributes.title;\r\n\t\t\tnodeContent.value = event.name;\r\n\t\t\tif(event.attributes.skipto === -1) {\r\n\t\t\t\tskipChoice.innerHTML = \"None\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet nodeFound = this.findNode(this.treeRef._data, event.attributes.skipto);\r\n\t\t\t\tskipChoice.innerHTML = nodeFound.attributes.title;\r\n\t\t\t}\r\n\t\t\tlet nodeSound = document.getElementById(\"viewNodeSound\");\r\n\t\t\t// console.log(event)\r\n\t\t\tif(event.attributes.nodeSound !== undefined || event.attributes.nodeSound !== null || event.attributes.nodeSound !== \"\") {\r\n\t\t\t\tnodeSound.innerHTML = event.attributes.nodeSound;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnodeSound.innerHTML = \"None\";\r\n\t\t\t}\r\n\t\t\tif(event.attributes.variables === undefined) {\r\n\t\t\t\tvariableContainer.innerHTML = \"None\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvariableContainer.innerHTML = event.attributes.variables;\r\n\t\t\t}\r\n\t\t\tif(event.attributes.variableConditions !== undefined) {\r\n\t\t\t\tvar conditionStr = \"\";\r\n\t\t\t\tfor(let conditionCounter = 0; conditionCounter < event.attributes.variableConditions.length; conditionCounter++) {\r\n\t\t\t\t\tlet hideText = \"\";\r\n\t\t\t\t\tif(event.attributes.variableConditions[conditionCounter][2] === \"Hide\" && event.attributes.variableConditions[conditionCounter][1] !== \"None\")\thideText = \" and hide this option.\"\r\n\t\t\t\t\telse if(event.attributes.variableConditions[conditionCounter][2] === \"Hide\" && event.attributes.variableConditions[conditionCounter][1] === \"None\")\thideText = \", hide this option.\"\r\n\t\t\t\t\tif(event.attributes.variableConditions[conditionCounter][1] !== \"None\")\tconditionStr += \"if \" + event.attributes.variableConditions[conditionCounter][0] + \", skip to node \" + event.attributes.variableConditions[conditionCounter][1] + hideText + \"<br/>\";\r\n\t\t\t\t\telse if(event.attributes.variableConditions[conditionCounter][1] === \"None\")\tconditionStr += \"if \" + event.attributes.variableConditions[conditionCounter][0] + hideText + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\tviewConditions.innerHTML = conditionStr;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tviewConditions.innerHTML = \"None\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(type === \"transfer\") {\r\n\t\t\tlet optionsTransfer = document.getElementById(\"skipChoiceTransfer\");\r\n\t\t\tfor (let i = (optionsTransfer.options.length)-1; i >= 0; i--) { // This clears options in case there is a change in the tree\r\n\t\t\t\toptionsTransfer.options[i] = null;\r\n\t\t\t}\r\n\t\t\tlet option = document.createElement(\"option\");\r\n\r\n\t\t\tselected = -1;\r\n\t\t\tfor(let i in tempArr) {\r\n\t\t\t\toption = document.createElement(\"option\");\r\n\t\t\t\tif(tempArr[i].title.length > 50) {\r\n\t\t\t\t\tlet str = tempArr[i].page_num + \": \" + tempArr[i].title;\r\n\t\t\t\t\toption.text = str.substring(0,50) + \"...\";\r\n\t\t\t\t}\r\n\t\t\t\telse option.text = tempArr[i].page_num + \": \" + tempArr[i].title;\r\n\t\t\t\toption.value = tempArr[i].page_num;\r\n\t\t\t\toptionsTransfer.add(option);\r\n\t\t\t\tif(tempArr[i].page_num === event.parent.id) {\r\n\t\t\t\t\tselected = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tselected = parseInt(selected);\r\n\t\t\toptionsTransfer.selectedIndex = selected;\r\n\t\t}\r\n\r\n\t\tconfirm.onclick = function() {\r\n\t\t\tlet thisCopy = treeRef;\r\n\t\t\tlet optionsTransfer = document.getElementById(\"skipChoiceTransfer\");\r\n\t\t\tif(type === \"transfer\") {\r\n\t\t\t\tlet parent = event.parent;\r\n\t\t\t\tlet newEntry = optionsTransfer.value;\r\n\t\t\t\tlet newParent = thisCopy.findNode(thisCopy.treeRef._data, parseInt(newEntry));\r\n\r\n\t\t\t\t// console.log(event);\r\n\t\t\t\tif(newParent.children === undefined || newParent.children.length === 0)\r\n\t\t\t\t\tnewParent.children = [event];\r\n\t\t\t\telse\r\n\t\t\t\t\tnewParent.children.push(event);\r\n\r\n\t\t\t\tfor(let i = 0; i < parent.children.length; i++) {\r\n\t\t\t\t\tif(parent.children[i].id === event.id) {\r\n\t\t\t\t\t\tparent.children.splice(i, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tevent.parent = newParent;\r\n\t\t\t\tthisCopy.treeRef.update(event);\r\n\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\tif(type === \"generateEmbed\") {\r\n\t\t\t\tdocument.getElementById(\"embedGameLink\").click();\r\n\t\t\t}\r\n\t\t\tif(type === \"new\") {\r\n\t\t\t\tdocument.getElementById(\"helpPage\").click();\r\n\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\tif(type === \"add\" || type === \"edit\") {\r\n\t\t\t\tif(nodeTitle.value === \"\") {\r\n\t\t\t\t\tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"You must add a title for this item!\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (type === \"add\") {\r\n\t\t\t\tlet nodeSound = document.getElementById(\"nodeSound\").value;\r\n\t\t\t\tif(nodeSound === undefined || nodeSound === null || nodeSound === \"\")\tnodeSound = \"\";\r\n\t\t\t\tlet skipTo = document.getElementById(\"skipChoice\").value;\r\n\t\t\t\tif(skipTo === \"None\")\tskipTo = -1;\r\n\t\t\t\tlet variableArrCheck = undefined;\r\n\t\t\t\tlet variableConditionsArrCheck = undefined;\r\n\t\t\t\tif(vars.value !== \"\") {\r\n\t\t\t\t\tvars.value = vars.value.replace(/[]/g, \"\\\"\");\r\n\t\t\t\t\tvars.value = vars.value.replace(/ /g, \"\");\r\n\t\t\t\t\tlet variableArray = vars.value.split(/\\s*,\\s*/); // regex for comma with space, or just comma\r\n\t\t\t\t\tvariableArrCheck = variableArray;\r\n\t\t\t\t\tlet conditionArr = document.getElementsByClassName(\"choiceConditions\");\r\n\t\t\t\t\tvariableConditionsArrCheck = [];\r\n\t\t\t\t\tfor(let i = 0; i < conditionArr.length-1; i++) {\r\n\t\t\t\t\t\tlet hide = \"No\";\r\n\t\t\t\t\t\tif(conditionArr[i].children[3].checked) {\r\n\t\t\t\t\t\t\thide = \"Hide\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvariableConditionsArrCheck.push([conditionArr[i].children[1].value, conditionArr[i].children[2].value, hide]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(nodeContent.value === \"\") {\r\n\t\t\t\t\tif(window.confirm(\"Your input is an empty string. Are you sure?\")) {\r\n\t\t\t\t\t\ttreeRef.addNode(event, {\r\n\t\t\t\t\t\t\tname: nodeContent.value,\r\n\t\t\t\t\t\t\tattributes: {\r\n\t\t\t\t\t\t\t\t\"title\": nodeTitle.value,\r\n\t\t\t\t\t\t\t\t\"decision\": \"\",\r\n\t\t\t\t\t\t\t\t\"prev_page\": \"\",\r\n\t\t\t\t\t\t\t\t\"skipto\": parseInt(skipTo),\r\n\t\t\t\t\t\t\t\t\"variables\": variableArrCheck,\r\n\t\t\t\t\t\t\t\t\"variableConditions\": variableConditionsArrCheck,\r\n\t\t\t\t\t\t\t\tnodeSound: nodeSound\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnodeContent.value = \"\";\r\n\t\t\t\t\tnodeTitle.value = \"\";\r\n\t\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t\t\tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"\";\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ttreeRef.addNode(event, {\r\n\t\t\t\t\t\tname: nodeContent.value,\r\n\t\t\t\t\t\tattributes: {\r\n\t\t\t\t\t\t\t\"title\": nodeTitle.value,\r\n\t\t\t\t\t\t\t\"decision\": \"\",\r\n\t\t\t\t\t\t\t\"prev_page\": \"\",\r\n\t\t\t\t\t\t\t\"skipto\": parseInt(skipTo),\r\n\t\t\t\t\t\t\t\"variables\": variableArrCheck,\r\n\t\t\t\t\t\t\t\"variableConditions\": variableConditionsArrCheck,\r\n\t\t\t\t\t\t\tnodeSound: nodeSound\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t})\r\n\t\t\t\t\tnodeContent.value = \"\";\r\n\t\t\t\t\tnodeTitle.value = \"\";\r\n\t\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t\t\tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(type === \"edit\") {\r\n\t\t\t\tlet nodeSound = document.getElementById(\"nodeSound\").value;\r\n\t\t\t\tif(nodeSound === undefined || nodeSound === null || nodeSound === \"\")\tnodeSound = \"\";\r\n\t\t\t\tlet skipCheck = false;\r\n\t\t\t\tlet skipTo = document.getElementById(\"skipChoice\").value;\r\n\t\t\t\tif(skipTo === \"None\") {\r\n\t\t\t\t\tskipTo = -1;\r\n\t\t\t\t\tskipCheck = true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif(event.hasOwnProperty(\"children\")) { // if they edited the skip option and added a skip for that node\r\n\t\t\t\t\t\talert(\"You cannot add a skip for nodes with children.\");\r\n\t\t\t\t\t\tskipCheck = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tskipCheck = true;\r\n\t\t\t\t}\r\n      \t\t\tif(skipCheck === true && window.confirm(\"Your input is: \" + nodeContent.value + \" \\nAre you sure you want to change to this statement?\")) {\r\n      \t\t\t\tevent.name = nodeContent.value;\r\n      \t\t\t\tevent.attributes.skipto = parseInt(skipTo);\r\n      \t\t\t\tevent.attributes.title = nodeTitle.value;\r\n      \t\t\t\tevent.attributes.nodeSound = nodeSound;\r\n\r\n\t\t\t\t\tif(vars.value !== \"\") {\r\n\t\t\t\t\t\tvars.value = vars.value.replace(/ /g, \"\");\r\n\t\t\t\t\t\tlet variableArray = vars.value.split(/\\s*,\\s*/); // regex for comma with space, or just comma\r\n\t\t\t\t\t\tevent.attributes.variables = variableArray;\r\n\t\t\t\t\t\tlet conditionArr = document.getElementsByClassName(\"choiceConditions\");\r\n\t\t\t\t\t\tevent.attributes.variableConditions = [];\r\n\t\t\t\t\t\tfor(let i = 0; i < conditionArr.length-1; i++) {\r\n\t\t\t\t\t\t\tlet hide = \"No\";\r\n\t\t\t\t\t\t\tif(conditionArr[i].children[3].checked) {\r\n\t\t\t\t\t\t\t\thide = \"Hide\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tevent.attributes.variableConditions.push([conditionArr[i].children[1].value, conditionArr[i].children[2].value, hide]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\tevent.attributes.variables = undefined;\r\n          \t\t}\r\n\t\t\t\ttreeRef.updateNodeText(event);\r\n\r\n\t\t\t\tnodeContent.value = \"\";\r\n\t\t\t\tnodeTitle.value = \"\";\r\n\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t\tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\telse if(type === \"delete\") {\r\n\t\t\t\tif(event.parent !== undefined) {\r\n\t      \t  \t\ttreeRef.removeNode(event);\r\n\t      \t  \t}\r\n\t      \t  \telse {\r\n\t      \t  \t\talert(\"You can't delete the root node!\");\r\n\t      \t  \t}\r\n\t      \t  \tmodal.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse if(type === \"deleteChildren\") {\r\n\t\t\t\ttreeRef.removeChildren(event);\r\n\t      \t  \tmodal.style.display = \"none\";\r\n\t      \t  \tcontent.innerHTML = contentCpy;\r\n\t\t\t}\r\n\t\t\tremoveCondition(event);\r\n\t\t}\r\n\r\n\t\tcancel.onclick = function() { // When the user clicks on <span> (x), close the modal\r\n\t\t  removeCondition(event);\r\n\t\t  modal.style.display = \"none\";\r\n\t\t  if(type === \"deleteChildren\") {\r\n\t\t  \tcontent.innerHTML = contentCpy;\r\n\t\t  }\r\n\t\t  else if(type === \"add\" || type === \"edit\") {\r\n\t\t  \tnodeContent.value = \"\";\r\n\t\t  \tnodeTitle.value = \"\";\r\n\t\t  \tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"\";\r\n\t\t  }\r\n\t\t  else if(type === \"generateEmbed\") {\r\n\t\t  \tdocument.getElementById(\"copySuccess\").innerHTML = \"\";\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tspan.onclick = function() {\r\n\t\t  removeCondition(event);\r\n\t\t  modal.style.display = \"none\";\r\n\t\t  if(type === \"deleteChildren\") {\r\n\t\t  \tcontent.innerHTML = contentCpy;\r\n\t\t  }\r\n\t\t  else if(type === \"add\" || type === \"edit\") {\r\n\t\t  \tnodeContent.value = \"\";\r\n\t\t  \tnodeTitle.value = \"\";\r\n\t\t  \tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"\";\r\n\t\t  }\r\n\t\t  else if(type === \"generateEmbed\") {\r\n\t\t  \tdocument.getElementById(\"copySuccess\").innerHTML = \"\";\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\twindow.onclick = function(event) { // When the user clicks anywhere outside of the modal, close it\r\n\t\t  if (event.target === modal) {\r\n\t\t  \tremoveCondition(event);\r\n\t\t    modal.style.display = \"none\";\r\n\t\t    if(type === \"deleteChildren\") {\r\n\t\t    \tcontent.innerHTML = contentCpy;\r\n\t\t    }\r\n\t\t    else if(type === \"add\" || type === \"edit\") {\r\n\t\t    \tnodeContent.value = \"\";\r\n\t\t    \tnodeTitle.value = \"\";\r\n\t\t    \tdocument.getElementById(\"nodeTitleAlert\").innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\telse if(type === \"generateEmbed\") {\r\n\t\t\t\tdocument.getElementById(\"copySuccess\").innerHTML = \"\";\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tfunction removeCondition(e) { // this is for deleting conditions upon modal close\r\n\t\t\tvar conditionLink = document.getElementById(\"divOfConditions\");\r\n\t\t\twhile(conditionLink.children.length > 1) {\r\n\t\t\t\tconditionLink.removeChild(conditionLink.firstChild);\r\n\t\t\t}\r\n\r\n\t\t\t// Add-on: reset nodeTitle.textContent too\r\n\t\t\tnodeTitle.textContent = \"\";\r\n\r\n\t\t\t// Add-on: reset varInherit to \"\"\r\n\t\t\tinherit.textContent = \"\";\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener(\"keydown\", function(e) {\r\n\t\t\tif(e.key === \"Escape\") {\r\n\t\t\t\tcancel.click();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\taddCondition(e) {\r\n\t\tvar conditionLink = document.getElementsByClassName(\"addConditionLink\");\r\n\t\tvar conditionSpan = document.getElementsByClassName(\"choiceConditions\");\r\n\t\tvar temp1 = conditionLink[conditionLink.length-1].outerHTML;\r\n\t\tvar temp2 = conditionSpan[conditionSpan.length-1].outerHTML;\r\n\r\n\t\t// This backup array is to store the already made conditions before adding another condition, which for some reason gets reset everytime  a new condition is added and there are already input values\r\n\t\tlet backupArr = [];\r\n\t\tfor(let i = 0; i < conditionSpan.length-1; i++)\r\n\t\t\tbackupArr.push([conditionSpan[i].children[1].value, conditionSpan[i].children[2].value, conditionSpan[i].children[3].checked])\r\n\r\n\t\t// This sets the link to hidden, and makes input fields visible\r\n\t\tfor(var i = 0; i < conditionSpan.length; i++)\r\n\t\t\tconditionSpan[i].style.display = \"block\";\r\n\t\tconditionLink[conditionLink.length-1].style.display = \"none\";\r\n\r\n\t\tvar newDiv = document.createElement(\"div\");\r\n\t\tnewDiv.className = \"row\";\r\n\t\tnewDiv.innerHTML = temp1 + temp2;\r\n\t\tvar temp = document.getElementById(\"divOfConditions\");\r\n\t\ttemp.innerHTML += newDiv.outerHTML;\r\n\r\n\t\t// We add event listeners here since we can't preserve listeners with innerHTML.\r\n\t\tvar addListenerParent = document.getElementsByClassName(\"row\");\r\n\t\taddListenerParent[addListenerParent.length-1].firstChild.onclick = (event) => this.addCondition(event);\r\n\r\n\t\t// Add event listeners and ids to the delete items as well\r\n\t\tvar deleteBtnArray = document.getElementsByClassName(\"closeBtn\");\r\n\t\tfor(let i = 0; i < deleteBtnArray.length-1; i++) {\r\n\t\t\tlet idStr = \"close\" + (i+1).toString();\r\n\t\t\tdeleteBtnArray[i].id = idStr;\r\n\t\t\tdeleteBtnArray[i].onclick = () => this.deleteCondition(idStr);\r\n\t\t}\r\n\r\n\t\t// Create options\r\n\t\tlet optionsSkip = document.getElementsByClassName(\"skipChoice2\");\r\n\t\tlet tempArr = this.convertTreeToList(this.treeRef._data);\r\n\t\t\r\n\t\tfor(let i = 0; i < optionsSkip.length-1; i++) {\r\n\t\t\tfor (let n = (optionsSkip[i].options.length)-1; n >= 0; n--) { // This clears options in case there is a change in the tree\r\n\t\t\t\toptionsSkip[i].options[n] = null;\r\n\t\t\t}\r\n\r\n\t\t\tlet optionValue = document.createElement(\"option\"); \r\n\t\t\toptionValue.text = \"None\";\r\n\t\t\toptionsSkip[i].add(optionValue);\r\n\t\t\tfor(let j in tempArr) {\r\n\t\t\t\toptionValue = document.createElement(\"option\");\r\n\t\t\t\tif(tempArr[j].content.length > 50) {\r\n\t\t\t\t\tvar str = tempArr[j].page_num + \": \" + tempArr[j].title;\r\n\t\t\t\t\toptionValue.text = str.substring(0,50) + \"...\";\r\n\t\t\t\t}\r\n\t\t\t\telse optionValue.text = tempArr[j].page_num + \": \" + tempArr[j].title;\r\n\t\t\t\toptionValue.value = tempArr[j].page_num;\r\n\t\t\t\toptionsSkip[i].add(optionValue);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// This exists since for some reason the conditions keep getting deleted every after a new condition was added, thus this block of code restores the values\r\n\t\tfor(let i = 0; i < backupArr.length; i++) {\r\n\t\t\tconditionSpan[i].children[1].value = backupArr[i][0];\r\n\t\t\tconditionSpan[i].children[2].value = backupArr[i][1];\r\n\t\t\tconditionSpan[i].children[3].checked = backupArr[i][2];\r\n\t\t}\r\n\t}\r\n\r\n\texportGame() {\r\n\t\tvar entry = this.treeRef._data;\r\n\t\tvar pagesFormat = this.convertTreeToList(entry);\r\n\t\t// console.log(pagesFormat);\r\n\t\taxios.post(SERVER + '/game/export/' + this.state.name, {\r\n\t\t\tid: this.state.id,\r\n\t\t\tname: this.state.name,\r\n\t\t\talias: this.state.alias,\r\n\t\t\tpages: pagesFormat,\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\talert(\"Export complete.\");\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\t// console.log(\"Failed\")\r\n\t\t\t});\r\n\t}\r\n\r\n\tdeleteCondition(event) { // this is for deleting conditions while modal is still open, basically user initiated deletion\r\n\t\tdocument.getElementById(event).parentNode.parentNode.remove();\r\n\t}\r\n\r\n\tchangeConditionVisibility(event, force) {\r\n\t\tlet array = document.getElementsByClassName(\"addConditionLink\");\r\n\t\tif(document.getElementById(\"varName\").value !== \"\") {\r\n\t\t\tfor(let i = 0; i < array.length; i++)\r\n\t\t\t\tarray[i].style.display = \"block\";\r\n\t\t}\r\n\t\telse if(document.getElementById(\"varName\").value === \"\" || force === \"close\") {\r\n\t\t\tfor(let i = 0; i < array.length; i++)\r\n\t\t\t\tarray[i].style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadGame(event) {\r\n\t\tvar entry = this.treeRef._data;\r\n\t\tvar pagesFormat = this.convertTreeToList(entry);\r\n\t\taxios.get(SERVER + '/game/download/' + this.state.name, {\r\n\t\t\tid: this.state.id,\r\n\t\t\tname: this.state.name,\r\n\t\t\talias: this.state.alias,\r\n\t\t\tpages: pagesFormat,\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\t// create an element that downloads the zip file sent back from the backend\r\n\t\t\t\t// although as of this moment, it only fetches the file created in the server instead of parssing the data sent back and turning it to a downloadable file. It turns into a zip but it's corrupted\r\n\t\t\t\t\r\n\t\t\t\tconst element = document.createElement(\"a\");\r\n\t\t\t\t// const file = new Blob([res.data], {type: 'application/octet-stream'});\r\n\t\t\t\telement.href = res.config.url;\r\n\t\t\t\t\r\n\t\t\t\t// element.href = URL.createObjectURL(file); // Idk why it won't work yet\r\n\t\t\t\telement.download = this.state.alias + \".zip\";\r\n\t\t\t\tdocument.body.appendChild(element);\r\n\t\t\t\telement.click();\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\t// console.log(\"Failed\")\r\n\t\t\t});\r\n\t}\r\n\r\n\tupdateName() {\r\n\t\tlet newName = document.getElementById(\"gameName\").value;\r\n\t\tthis.setState({\r\n\t\t\tname: newName\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {loading, name, data} = this.state;\r\n\r\n\t\tif (loading) {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>Page is loading...</h2>\r\n\t\t\t\t\t<div className=\"loader\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"generalFade\">\r\n\t\t\t\t<div style={{\"margin\": \"auto\", \"padding\": \"10px\", \"width\": \"50%\", \"textAlign\": \"center\"}}>\r\n\t\t\t\t\t<span>Game:</span><br />\r\n\t\t\t\t\t<input className=\"input-styled\" style={{\"height\": \"50px\", \"fontSize\": \"30px\", \"textAlign\": \"center\"}} id=\"gameName\" type=\"text\" value={name} onChange={this.updateName} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"treeWrapper\" style={{width: '100%', height: '70vh', border: '1px solid red', \"margin\": \"auto\"}}>\r\n\t\t\t\t\t<TreeEditor\r\n\t\t\t\t\t\ttreeData = { data }\r\n\t\t\t\t\t\ttreeConfig = { this.treeConfig }\r\n\t\t\t\t\t\tonRef = { ref => (this.treeRef=ref) }\r\n\t\t\t\t\t\taddElementModel={this.addElementModel}\r\n\t\t\t\t\t\tfilterTextName={this.filterTextName}\r\n\t\t\t\t\t\tcontextMenuOpen={this.contextMenuOpen}\r\n\t\t\t\t\t\tcontextMenuClose={this.contextMenuClose}\r\n\t\t\t\t\t\tselectImageLink={this.selectImageLink}\r\n\t\t\t\t\t\tgetContextMenu={this.getContextMenu}\r\n\t\t\t\t\t\ttreeRenderedCallback={this.treeRenderedCallback}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div id=\"myModal\" className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<span className=\"close\">&times;</span><br />\r\n\t\t\t\t\t\t\t<div id=\"contentPlaceholder\">\r\n\t\t\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t\t\t<input id=\"nodeTitle\" type=\"text\" placeholder=\"&nbsp;\" style={{\"color\": \"#000\"}} />\r\n\t\t\t\t\t\t\t\t\t<span class=\"label\">Title</span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"focus-bg\"></span>\r\n\t\t\t\t\t\t\t\t\t<span id=\"nodeTitleAlert\" style={{color:\"#F00\"}}></span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<p>Node Content:<br />\r\n\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\tid=\"nodeContent\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-styled\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ minHeight: 100, width: \"100%\", \"overflow-y\": \"scroll\"}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tSkip to:\r\n\t\t\t\t\t\t\t\t\t<div class=\"select\">\r\n\t\t\t\t\t\t\t\t\t\t<select id=\"skipChoice\" class=\"select-text\">\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"select-highlight\"></span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"select-bar\"></span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\tAdd sound: <input className=\"input-styled\" size=\"30\" id=\"nodeSound\" type=\"text\" placeholder=\"https://your-link-here.mp3\" />\r\n\t\t\t\t\t\t\t\t<div id=\"variableSuperClass\"><hr />\r\n\t\t\t\t\t\t\t\t\t<div className=\"variables\">Add variables:<span id=\"varInherit\" style={{\"color\": \"#f00\"}}></span><br />\r\n\t\t\t\t\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input id=\"varName\" type=\"text\" style={{\"color\": \"#000\"}} onInput={(event) => this.changeConditionVisibility(event, \"temp\")} placeholder=\"&nbsp;\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"label\">Variable(s)<span style={{\"fontSize\": \"10px\"}}>(Ex: a=1,b=2,c=3,x=input)</span></span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"focus-bg\"></span>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<div id=\"divOfConditions\" style={{float:\"right\", paddingRight:\"20px\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/#\" className=\"addConditionLink\" style={{display:\"none\"}} onClick={(event) => this.addCondition(event)}>Add condition +</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"choiceConditions\" style={{display:\"none\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/#\" className=\"closeBtn\" style={{\"fontWeight\": \"bold\"}}>&times;</a>&ensp;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif <input type=\"text\" size=\"8\" placeholder=\"a=100\" className=\"input-styled\" />&emsp;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSkip to:&nbsp;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"select-text skipChoice2\" style={{\"width\": \"100px\"}}></select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" value=\"hideNode\" /> Hide choice\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button id=\"confirmBtn\" className=\"btn btn-sm animated-button thar-one\">Confirm</button>\r\n\t\t\t\t\t\t\t\t<button id=\"cancelBtn\" className=\"btn btn-sm animated-button thar-one\">Cancel</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"modalDelete\" className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<span className=\"close\">&times;</span><br />\r\n\t\t\t\t\t\t\t<div id=\"deletecontentPlaceholder\">\r\n\t\t\t\t\t\t\t\tThis will delete the node and all of its children. Are you sure?\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button id=\"confirmBtnDelete\" className=\"btn btn-sm animated-button thar-one\">Confirm</button>\r\n\t\t\t\t\t\t\t\t<button id=\"cancelBtnDelete\" className=\"btn btn-sm animated-button thar-one\">Cancel</button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"modalView\" className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<span className=\"close\">&times;</span><br />\r\n\t\t\t\t\t\t\t<div id=\"viewContentPlaceholder\">\r\n\t\t\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t\t\t<h6>Title:</h6>\r\n\t\t\t\t\t\t\t\t\t<span id=\"viewNodeTitle\"></span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<p>Node Content:<br />\r\n\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\tid=\"viewNodeContent\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-styled\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ minHeight: 100, width: \"100%\", \"overflow-y\": \"scroll\"}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tSkip to:\r\n\t\t\t\t\t\t\t\t\t<span id=\"viewSkipChoice\"></span><br />\r\n\t\t\t\t\t\t\t\t\tCurrent sound:\r\n\t\t\t\t\t\t\t\t\t<span id=\"viewNodeSound\"></span>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<div id=\"viewVariableSuperClass\"><hr />\r\n\t\t\t\t\t\t\t\t\t<div className=\"variables\">Current variables:<br />\r\n\t\t\t\t\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span id=\"viewVarName\"></span>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<div id=\"viewDivOfConditions\" style={{float:\"right\", paddingRight:\"20px\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\tConditions:\r\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"viewRow\"></div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button id=\"viewCancelBtn\" className=\"btn btn-sm animated-button thar-one\">Cancel</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"modalEmbed\" className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<span className=\"close\">&times;</span><br />\r\n\t\t\t\t\t\t\t<div id=\"embedcontentPlaceholder\">\r\n\t\t\t\t\t\t\t\t<div>Embed link generated!</div>\r\n\t\t\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t\t\tLive view:\r\n\t\t\t\t\t\t\t\t\t<input id=\"embedLinkText\" className=\"input-styled\" style={{\"background\": \"#ddd\", \"height\": \"40px\", \"color\": \"#000\"}} type=\"text\" readonly=\"readonly\" />\r\n\t\t\t\t\t\t\t\t\t<button id=\"embedLinkTextCpy\" className=\"btn btn-sm animated-button thar-one\" style={{\"color\": \"#000\"}} onClick={(event) => this.clipboardCopy(\"embedLinkText\")}>Copy to clipboard</button>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<div className=\"spaced\"></div>\r\n\t\t\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t\t\tFor website embedding:\r\n\t\t\t\t\t\t\t\t\t<input id=\"embedLinkTextIframe\" className=\"input-styled\" style={{\"background\": \"#ddd\", \"height\": \"40px\", \"color\": \"#000\"}} type=\"text\" readonly=\"readonly\" />\r\n\t\t\t\t\t\t\t\t\t<button id=\"embedLinkTextIframeCpy\" className=\"btn btn-sm animated-button thar-one\" style={{\"color\": \"#000\"}} onClick={(event) => this.clipboardCopy(\"embedLinkTextIframe\")}>Copy to clipboard</button>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span id=\"copySuccess\"></span>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button id=\"generateBtnEmbed\" className=\"btn btn-sm animated-button thar-one\">Show live preview</button>\r\n\t\t\t\t\t\t\t\t<button id=\"closeBtnEmbed\" className=\"btn btn-sm animated-button thar-one\">Close</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"modalNew\" className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<span className=\"close\">&times;</span><br />\r\n\t\t\t\t\t\t\t<div id=\"newContentPlaceholder\" style={{\"textAlign\": \"center\"}}>\r\n\t\t\t\t\t\t\t\t<h6>You seem to be new around here. Do you want to view the help page?</h6>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button id=\"confirmBtnNew\" className=\"btn btn-sm animated-button thar-one\">Yes</button>\r\n\t\t\t\t\t\t\t\t<button id=\"cancelBtnNew\" className=\"btn btn-sm animated-button thar-one\">No</button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"modalTransfer\" className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<span className=\"close\">&times;</span><br />\r\n\t\t\t\t\t\t\t<div id=\"transferContentPlaceholder\" style={{\"textAlign\": \"center\"}}>\r\n\t\t\t\t\t\t\t\t<h6>Tranfer this node to where?</h6>\r\n\t\t\t\t\t\t\t\t<div class=\"select\">\r\n\t\t\t\t\t\t\t\t\t<select id=\"skipChoiceTransfer\" class=\"select-text\">\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t<span class=\"select-highlight\"></span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"select-bar\"></span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button id=\"confirmBtnTransfer\" className=\"btn btn-sm animated-button thar-one\">Confirm</button>\r\n\t\t\t\t\t\t\t\t<button id=\"cancelBtnTransfer\" className=\"btn btn-sm animated-button thar-one\">Cancel</button>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{\"margin\": \"auto\", \"width\": \"50%\", \"textAlign\": \"center\"}}>\r\n\t\t\t\t\t\t<a id=\"saveTreeLink\" href=\"/#\" onClick={(event) => this.saveData(event)}>{/*Save current tree*/}</a> {/*this is programatically clicked in Navbar.js*/}\r\n\t\t\t\t\t\t<a id=\"exportGameLink\" href=\"/#\" onClick={(event) => this.exportGame(event)}>{/*Export game*/}</a> {/*this is programatically clicked in Navbar.js*/}\r\n\t\t\t\t\t\t<a id=\"embedGameLinkContainer\" href=\"/#\" onClick={(event) => this.embedGameContainer(event)}>{/*Generate embed link*/}</a>\r\n\t\t\t\t\t\t{/*<button onClick={(event) => this.treeRefView(event)}>TreeRef</button>*/}\r\n\t\t\t\t\t\t{/*<button onClick={(event) => this.printData(event)}>Print</button>*/}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GameInterface;","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as AiIcons from \"react-icons/ai\";\r\nimport '../../style.css';\r\n\r\nimport { SERVER } from '../../config.js';\r\n\r\nasync function loginUser(credentials) {\r\n\treturn fetch(SERVER + '/game/login/', {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify(credentials)\r\n\t})\r\n\t\t.then(data => data.json());\r\n}\r\n\r\nexport default function Login({ setToken }) {\r\n\tconst [username, setUserName] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\r\n\tconst togglePasswordFunc = () => {\r\n\t\tconst password = document.getElementById(\"authPw\");\r\n\t\tconst type = password.getAttribute('type') === 'password' ? 'text' : 'password';\r\n\t\tpassword.setAttribute('type', type);\r\n\t}\r\n\r\n\tconst handleSubmit = async e => {\r\n\t\tlet aliasCheck = document.getElementById(\"aliasCheck\");\r\n\t\tlet passCheck = document.getElementById(\"passCheck\");\r\n\t\tlet check = false;\r\n\t\te.preventDefault(); // prevents submission of empty form fields\r\n\t\tif(username === \"\" || username === undefined) {\r\n\t\t\taliasCheck.innerHTML = \"Username field must be filled out.\";\r\n\t\t\tcheck = false;\r\n\t\t}\r\n\t\tif(password === \"\" || password === undefined) {\r\n\t\t\tpassCheck.innerHTML = \"Password field must be filled out.\";\r\n\t\t\tcheck = false;\r\n\t\t}\r\n\t\tif(username !== \"\" && username !== undefined && password !== \"\" && password !== undefined) {\r\n\t\t\taliasCheck.innerHTML = passCheck.innerHTML = \"\";\r\n\t\t\tcheck = true;\r\n\t\t}\r\n\t\tif(check === true) {\r\n\t\t\tdocument.getElementById(\"coverLogin\").style.display = \"block\";\r\n\t\t\tdocument.getElementById(\"loginFormContainer\").style.opacity = \"0.25\";\r\n\t\t\tconst token = await loginUser({\r\n\t\t\t\tusername,\r\n\t\t\t\tpassword\r\n\t\t\t});\r\n\t\t\tvar authStr = username + password;\r\n\t\t\tif(token.tokenStr === authStr) {\r\n\t\t\t\tsessionStorage.setItem(\"gameName\", username);\r\n\t\t\t\tlet moddedToken = {token: token.token};\r\n\t\t\t\tsetToken(moddedToken);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\talert(token.token);\r\n\t\t\t\tdocument.getElementById(\"coverLogin\").style.display = \"none\";\r\n\t\t\t\tdocument.getElementById(\"loginFormContainer\").style.opacity = \"1\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div id=\"coverLogin\" style={{\"width\": \"100%\", \"height\": \"100%\", \"z-index\": \"1\", \"textAlign\":\"center\", \"position\": \"fixed\", \"display\": \"none\"}}>\r\n\t\t\t\t<h2 style={{\"color\": \"#fff\", \"marginTop\": \"10%\"}}>Logging in...</h2>\r\n\t\t\t</div>\r\n\t\t\t<h4>Login to an existing game:</h4>\r\n\t\t\t<div id=\"loginFormContainer\" style={{\"width\": \"100%\", \"margin\": \"auto\"}}>\r\n\t\t\t\t<form onSubmit={ handleSubmit }>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t<input id=\"authAlias\" type=\"text\" onChange={e => setUserName(e.target.value)} placeholder=\"&nbsp;\" />\r\n\t\t\t\t\t\t\t<span className=\"label\">Alias</span>\r\n\t\t\t\t\t\t\t<span className=\"focus-bg\"></span>\r\n\t\t\t\t\t\t\t<span id=\"aliasCheck\"></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t\t<input id=\"authPw\" type=\"password\" onChange={e => setPassword(e.target.value)} placeholder=\"&nbsp;\" />\r\n\t\t\t\t\t\t\t<span className=\"label\">Password</span>\r\n\t\t\t\t\t\t\t<span className=\"focus-bg\"></span>\r\n\t\t\t\t\t\t\t<span id=\"passCheck\"></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<span id=\"togglePassword\" className=\"eye\" onClick={togglePasswordFunc}><AiIcons.AiFillEye /></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-sm animated-button thar-one\">Submit</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nLogin.propTypes = {\r\n\tsetToken: PropTypes.func.isRequired\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport axios from 'axios';\r\nimport * as AiIcons from \"react-icons/ai\";\r\nimport '../../style.css';\r\n\r\n\r\nimport { SERVER } from '../../config.js';\r\n\r\nlet newGameData = \"\";\r\n\r\nasync function loginUser(credentials) {\r\n\treturn fetch(SERVER + '/game/login/', {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify(credentials)\r\n\t})\r\n\t\t.then(data => data.json());\r\n}\r\n\r\nasync function createGame(credentials) {\r\n\tawait axios.post(SERVER + '/game/createGame/', {\r\n\t\tname: credentials.name,\r\n\t\talias: credentials.alias,\r\n\t\tpassword: credentials.password\r\n\t})\r\n\t\t.then(res => {\r\n\t\t\tif(res.data !== \"Alias has been used.\") {\r\n\t\t\t\tnewGameData = {\r\n\t\t\t\t\talias: credentials.alias,\r\n\t\t\t\t\tpassword: credentials.password\r\n\t\t\t\t}\r\n\t\t\t\treturn newGameData;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnewGameData = \"\";\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\tconsole.log(\"Failed to create game.\")\r\n\t\t});\r\n}\r\n\r\nexport default function Signup({ setToken }) {\r\n\tvar name = \"\";\r\n\tvar alias = \"\";\r\n\tvar password = \"\";\r\n\tlet pass = false;\r\n\r\n\tconst setAlias = e => {\r\n\t\tlet validityCheck = document.getElementById(\"validityCheck\");\r\n\t\tvalidityCheck.innerHTML = \"Checking alias availability...\";\r\n\t\talias = e;\r\n\t\tlet temp_alias = alias;\r\n\t\tsetTimeout(function () {\r\n\t\t\tif (temp_alias === alias) {\r\n\t\t\t\tconsole.log(\"The value hasn't changed.\");\r\n\t\t\t\taxios.post(SERVER + '/game/checkAlias/', {\r\n\t\t\t\t\talias: alias\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tif(res.data === \"Reject\") {\r\n\t\t\t\t\t\t\tvalidityCheck.innerHTML = \"This alias is no longer available.\";\r\n\t\t\t\t\t\t\tpass = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif(alias === \"\") {\r\n\t\t\t\t\t\t\t\tvalidityCheck.innerHTML = \"This field is required.\";\r\n\t\t\t\t\t\t\t\tpass = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tvalidityCheck.innerHTML = \"This alias is available!\";\r\n\t\t\t\t\t\t\t\tpass = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttemp_alias = alias;\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\tconst setName = e => {\r\n\t\tname = e;\r\n\t}\r\n\r\n\tconst setPassword = e => {\r\n\t\tpassword = e;\r\n\t}\r\n\r\n\tconst togglePasswordFunc = () => {\r\n\t\tconst password = document.getElementById(\"authPwSignup\");\r\n\t\tconst type = password.getAttribute('type') === 'password' ? 'text' : 'password';\r\n\t\tpassword.setAttribute('type', type);\r\n\t}\r\n\r\n\tconst login = async e => {\r\n\t\tdocument.getElementById(\"coverSignup\").style.display = \"block\";\r\n\t\tdocument.getElementById(\"signupFormContainer\").style.opacity = \"0.25\";\r\n\t\tconst token = await loginUser({\r\n\t\t\tusername: alias,\r\n\t\t\tpassword\r\n\t\t});\r\n\t\tif(token.token.substring(0,1) === \"$\") {\r\n\t\t\tsessionStorage.setItem(\"gameName\", alias);\r\n\t\t\tsetToken(token);\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert(token.token);\r\n\t\t\tdocument.getElementById(\"authAliasSignup\").value = \"\";\r\n\t\t\tdocument.getElementById(\"authNameSignup\").value = \"\";\r\n\t\t\tdocument.getElementById(\"authPwSignup\").value = \"\";\r\n\t\t\tdocument.getElementById(\"coverSignup\").style.display = \"none\";\r\n\t\t\tdocument.getElementById(\"signupFormContainer\").style.opacity = \"1\";\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = async e => {\r\n\t\te.preventDefault(); // prevents submission of empty form fields\r\n\t\tif(name !== \"\" && alias !== \"\" && password !== \"\") {\r\n\t\t\tif(pass === true) {\r\n\t\t\t\tawait createGame({\r\n\t\t\t\t\tname,\r\n\t\t\t\t\talias,\r\n\t\t\t\t\tpassword\r\n\t\t\t\t})\r\n\t\t\t\tlogin(e);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert(\"Please fill out all the fields and check them for errors before submitting.\")\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div id=\"coverSignup\" style={{\"width\": \"100%\", \"height\": \"100%\", \"z-index\": \"1\", \"textAlign\":\"center\", \"position\": \"fixed\", \"display\": \"none\"}}>\r\n\t\t\t\t<h2 style={{\"color\": \"#fff\", \"marginTop\": \"10%\"}}>Creating...</h2>\r\n\t\t\t</div>\r\n\t\t\t<h4>Create a new game:</h4>\r\n\t\t\t<div id=\"signupFormContainer\" style={{\"width\": \"50%\", \"margin\": \"auto\"}}>\r\n\t\t\t\t<form onSubmit={ handleSubmit }>\r\n\t\t\t\t\t<div className=\"help-tip\">\r\n\t\t\t\t\t\t<p>This is the unique ID you assign to your game. You will use this for logging in to your game later on, so make sure to remember it.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t<input id=\"authNameSignup\" type=\"text\" onChange={e => setAlias(e.target.value)} placeholder=\"&nbsp;\" />&ensp;\r\n\t\t\t\t\t\t<span className=\"label\">Alias</span>\r\n\t\t\t\t\t\t<span className=\"focus-bg\"></span>\r\n\t\t\t\t\t\t<span id=\"validityCheck\"></span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\r\n\r\n\t\t\t\t\t<div className=\"help-tip\">\r\n\t\t\t\t\t\t<p>This is your game's display name. Be creative all you want and think of a good name!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t<input id=\"authAliasSignup\" type=\"text\" onChange={e => setName(e.target.value)} placeholder=\"&nbsp;\" />&ensp;\r\n\t\t\t\t\t\t<span className=\"label\">Name</span>\r\n\t\t\t\t\t\t<span className=\"focus-bg\"></span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t<div className=\"help-tip\">\r\n\t\t\t\t\t\t<p>Choose a secure password for your game so it can't be easily modified by others.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<label className=\"inp\">\r\n\t\t\t\t\t\t<input id=\"authPwSignup\" type=\"password\" onChange={e => setPassword(e.target.value)} placeholder=\"&nbsp;\" />&ensp;\r\n\t\t\t\t\t\t<span className=\"label\">Password</span>\r\n\t\t\t\t\t\t<span className=\"focus-bg\"></span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<span id=\"togglePasswordSignup\" className=\"eye\" onClick={togglePasswordFunc}><AiIcons.AiFillEye /></span>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-sm animated-button thar-one\">Submit</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nSignup.propTypes = {\r\n\tsetToken: PropTypes.func.isRequired\r\n};","import React from 'react';\r\n\r\nexport default function NotFound() {\r\n\treturn (\r\n\t\t<div style={{\"textAlign\": \"center\"}}>\r\n\t\t\t<h1>Oops! The page you were looking for was not found.</h1>\r\n\t\t\t<a href=\"/\">\r\n\t\t\t\tGo back to homepage\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { SERVER } from '../../config.js';\r\n\r\n// \timport NotFound from '../../pages/NotFound/NotFound';\r\n\r\nexport default function Embed() {\r\n\tlet { id } = useParams();\r\n\tlet path = SERVER + \"/exports/\" + id + \"/index.html\";\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<iframe id=\"htmlFrame\" title=\"gameFrame\" style={{\"position\": \"relative\", \"top\": \"0\", \"left\": \"0\", \"width\": \"100%\", \"height\": \"100vh\", \"border\": \"0\"}} src={ path }></iframe>\r\n\t\t\t<div style={{\"position\": \"absolute\", \"bottom\": \"0\", \"margin\": \"0 auto\", \"zIndex\": \"100\", \"width\": \"100%\", \"textAlign\": \"center\"}}>\r\n\t\t\t\tMade with <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\">TextSimEngine</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}","import React, { useState } from 'react';\r\nimport * as FaIcons from \"react-icons/fa\";\r\nimport \"./style.css\";\r\n\r\nexport default function About() {\r\n\tconst [sidebar, setSidebar] = useState(false);\r\n\tlet currentYear = new Date().getFullYear();\r\n\tconst str = \"Copyright \\u00A9 2019-\" + currentYear + \" Janzen Christian Aguila. All Rights Reserved.\"; // &copy; was initially used\r\n\tconst showSidebar = () => setSidebar(!sidebar);\r\n\r\n\tconst showSidebarText = () => {\r\n\t\tlet text = document.getElementById(\"sidebarText\");\r\n\t\ttext.innerHTML = \"Toggle sidebar\";\r\n\t}\r\n\r\n\tconst hideSidebarText = () => {\r\n\t\tlet text = document.getElementById(\"sidebarText\");\r\n\t\ttext.innerHTML = \" \";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div id=\"aboutMain\">\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"attach\" id=\"sidebarToggle\">\r\n\t\t\t\t\t<a href=\"#sidebarToggle\"  onClick={showSidebar} onMouseOver={showSidebarText} onMouseOut={hideSidebarText}><FaIcons.FaBars /><span id=\"sidebarText\"> </span></a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={sidebar ? \"links hideShow hidden\" : \"links hideShow\"}>\r\n\t\t\t\t\t<h4>Quick Links</h4>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<a href=\"#logo\">TextSimEngine</a><br />\r\n\t\t\t\t\t<a href=\"#aboutApp\">About the app</a><br />\r\n\t\t\t\t\t<a href=\"#help\">Need help?</a><br />\r\n\t\t\t\t\t<ol>\r\n\t\t\t\t\t\t<li><a href=\"#signup\">Signing up</a></li>\r\n\t\t\t\t\t\t<li><a href=\"#login\">Logging in</a></li>\r\n\t\t\t\t\t\t<li><a href=\"#create\">Creating your game</a>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#view\">View item details</a></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#add\">Add item</a></li>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"#addTitle\">Title</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"#addContent\">Node content</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"#addSkip\">Skip to</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"#addSound\">Add Sound</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"#addVariables\">Variables</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"#addConditions\">Conditions</a></li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#delete\">Delete item</a></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#edit\">Edit item</a></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#deleteChild\">Delete children</a></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#transferNode\">Transfer node</a></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#expand\">Expand all</a></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#collapse\">Collapse all</a></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li><a href=\"#save\">Saving your game</a></li>\r\n\t\t\t\t\t\t<li><a href=\"#export\">Exporting your game</a></li>\r\n\t\t\t\t\t\t<li><a href=\"#embed\">Embedding your game</a></li>\r\n\t\t\t\t\t\t<li><a href=\"#logout\">Logging out</a></li>\r\n\t\t\t\t\t</ol>\r\n\t\t\t\t\t<a href=\"#important\">IMPORTANT NOTES!</a><br />\r\n\t\t\t\t\t<a href=\"#acknowledgement\">Acknowledgement</a><br />\r\n\t\t\t\t\t<a href=\"#aboutDev\">About the developer</a><br />\r\n\t\t\t\t\t<a href=\"#end\">End of page</a><br />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<img src={require(\"../../Assets/InitLogo.png\")} alt=\"TextSimEngine\" id=\"logo\" />\r\n\t\t\t<div id=\"aboutApp\">\r\n\t\t\t\t<h1>About the app</h1>\r\n\t\t\t\t<hr width=\"50%\" />\r\n\t\t\t\t<p className=\"regulatedWidth\">\r\n\t\t\t\t\tTextSimEngine is an game engine that is used to create text-based games.<br /><br />\r\n\r\n\t\t\t\t\tThis application gives you the power to turn your stories into interactive stories\r\n\t\t\t\t\teven without programming knowledge!<br /><br />\r\n\r\n\t\t\t\t\tIts goal is to help make development of text-based games easier for everyone with the\r\n\t\t\t\t\timplementation of a drag-and-drop graphical user interface and to make games accessible for\r\n\t\t\t\t\teveryone with embeddable versions of the games they created.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h1 id=\"help\">Need help?</h1>\r\n\t\t\t\t<hr width=\"50%\" />\r\n\t\t\t\t<div className=\"regulatedWidth\">\r\n\t\t\t\t\t<div id=\"gettingStarted\" className=\"alignLeft\">\r\n\t\t\t\t\t\t<span className=\"boldText\">Getting started</span><br />\r\n\t\t\t\t\t\t<ol>\r\n\t\t\t\t\t\t\t<li><span id=\"signup\" className=\"boldText\">Signing up</span><br />\r\n\t\t\t\t\t\t\t\tCreate your first game in less than a minute, and it's free! Are you wondering what the labels mean?\r\n\t\t\t\t\t\t\t\t<ul className=\"unstyledList\">\r\n\t\t\t\t\t\t\t\t\t<li><span className=\"boldText\">Alias</span>\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"indented\">This is what you use to login to your game. Somewhat similar to a username in other sites.</p>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span className=\"boldText\">Name</span>\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"indented\">This is your game's name in public upon export. This is basically your game's title. Get creative!</p>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span className=\"boldText\">Password</span>\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"indented\">Pretty self-explanatory. This is your password, which you use for restricting access to the game. Make sure to remember your password (since we don't offer a password recovery option yet).</p>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\tAfter filling up the fields, hit the \"Submit\" button and you're ready to make your first game!\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li><span id=\"login\" className=\"boldText\">Logging in:</span><br />\r\n\t\t\t\t\t\t\t\tIf you already have a game and you want to edit it, just go to the login section of the start page and enter your game's alias and password.\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<span id=\"create\" className=\"boldText\">Creating your game:</span><br />\r\n\t\t\t\t\t\t\t\tYou're finally ready to make some games!<br /><br />\r\n\t\t\t\t\t\t\t\tIn the starting screen, you should see that there is an item called a \"node\" with the content \"Edit this content\". This is your root node. This can never be deleted, and can only be edited. You have to start somewhere!<br /><br />\r\n\t\t\t\t\t\t\t\tRight-click on the node to view the context menu. The options in the menu are described below.<br />\r\n\t\t\t\t\t\t\t\t<ul className=\"unstyledList\">\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"view\" className=\"boldText\">View item details</span><hr />\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"indented\">This shows all the attributes of the specific node you chose. It shows its title, name, ID, previous page, which node it skips to, child nodes, variables associated with it, and the conditions for those variables.<br />\r\n\t\t\t\t\t\t\t\t\t\tThese will be explained further in the addition of new nodes on the next part.</p>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"add\" className=\"boldText\">Add item</span><hr />\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"indented\">Upon clicking this option, it shows a window where you can specify what your newly added node will be.\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"addTitle\" className=\"boldText\">Title</span> - This is the title of your node. You can use it later to track your work and identify which node is which, especially when you specify skips for the nodes.<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"addContent\" className=\"boldText\">Node content</span> - This is your node's main content. This is the main message that will be displayed when your game is exported for playing. In short, this is where the bulk of your story goes! If you also want to include changing components to your game, like a player's name or an inventory of items check out the variables section of the guide!<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"addSkip\" className=\"boldText\">Skip to</span> - This is where you define if your node will skip to another node afterwards. These can only be applied on nodes that do not have child nodes, as the node they're skipping to will basically be their only \"child\".<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"addSound\" className=\"boldText\">Add Sound</span> - This is the section where you can add sounds to your current node. You can use any sound format (ie. mp3, wav) on the internet as long as they are publicly available or downloadable, and as long as you have the proper rights to use them either personally or commercially (ex. This sample sound from <a href=\"https://gamesounds.xyz/OpenBundle/Background%20Music%20and%20Loops/Elevator%20Music%20%28loop%29.mp3\">Gamesounds</a>).<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"addVariables\" className=\"boldText\">Variables</span> - This is where you may add variables. Remember that it was said on the first part of this page that you don't need programming skills? Now, you'll get to learn a bit of it!<br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\tWhat these variables do is add a bit of twist to your game. Say you want to greet a player by their name <s>but God said \"you can't\"</s>, this part gives you the option to greet the player hello!<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\tYou can also define things here that you want to change throughout the game (for example, a backpack that can store different items). Simply follow these syntax to learn how to manipulate variables!<br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"indented\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"boldText\">Creator-defined variables</span> - these are variables you don't want the player to change, or at least the only ones that you the creator can change.<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tThe syntax is: <i>(without the asterisks(*))</i><br /><code>*variable_name*=*variable_value*</code><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tFor strings, use the syntax <i>(without the asterisks(*))</i>:<br /><code>*variable_name*=\"*variable_value*\"</code><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTo put them inside your node's content, use this syntax: <i>(without the asterisks(*))</i><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<code>{`{*variable_name*}`}</code><br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"boldText\">Player-defined variables</span> - these are variables you give the player the option to change. These are basically user-inputs.<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tThe syntax is:<i>(without the asterisks(*))</i><br /><code>*variable_name*=input</code><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTo put them inside your node's content, use this syntax: <i>(without the asterisks(*))</i><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<code>{`{*variable_name*=input}`}</code><br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span id=\"addConditions\" className=\"boldText\">Conditions</span> - This is hidden at first, but the \"Add condition\" will be available once you define your variables. These add more twists to your game, as it can use your variables to generate a skip to a different node or hide the specific node upon meeting the condition.<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\tThis is another bit of programming, and you will learn to make your game a lot more interactive. The specifics are explained below.<br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"indented\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"boldText\"><i>if</i> ______</span> - This is where you define when your condition should trigger. Say for example, you defined a variable named <code>apples=10</code> and you decided to change the value throughout the game, and upon reaching 100 you want to do something, whether finishing the game, hiding a node, or something else. In here you just have to do <code>if apples=100</code> and change the other two components to your liking.<br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"boldText\">Skip to</span> - This is where you define which node you want to go to if the given condition is achieved. Say you want to end the game, you choose the option that shows the title of the last page of the game.<br /><br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"boldText\">Hide choice</span> - This is where you hide the node you're currently working with. Say you have a variable named <code>money=100</code> but this node requires the player's <code>money</code> to be <code>1000</code>. You can then choose to tick this option to disallow them from accessing the next node.<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"delete\" className=\"boldText\">Delete item</span><hr />\r\n\t\t\t\t\t\t\t\t\t\tThis is pretty self-explanatory, as clicking this node will give you a prompt to delete the current node. Take note that deleting a node also deletes its children! (Also, remember that the root node can never be deleted)<br /><br />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"edit\" className=\"boldText\">Edit item</span><hr />\r\n\t\t\t\t\t\t\t\t\t\tIf you followed how to add a new node, then you just basically apply it here as well since editing a node only changes what is already in an existing node.<br /><br />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"deleteChild\" className=\"boldText\">Delete children</span><hr />\r\n\t\t\t\t\t\t\t\t\t\tThis is almost the same as deleting a node, except it only deletes the node's children and keeps the current node.<br /><br />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"transferNode\" className=\"boldText\">Transfer node</span><hr />\r\n\t\t\t\t\t\t\t\t\t\tThis allows you to change a node's parent, and transfer it to another one. Just select the appropriate title of the respective node in the dropdown.<br /><br />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"expand\" className=\"boldText\">Expand all</span><hr />\r\n\t\t\t\t\t\t\t\t\t\tSelecting this shows all the children of a certain node.<br /><br />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li><span id=\"collapse\" className=\"boldText\">Collapse all</span><hr />\r\n\t\t\t\t\t\t\t\t\t\tSelecting this hides all the children of a certain node.<br /><br />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li><span id=\"save\" className=\"boldText\">Saving your game:</span><br />\r\n\t\t\t\t\t\t\t\tOnce you think your game is good enough, or you just want to take a break for a bit you can save your game! Just open the hamburger menu (<FaIcons.FaBars />) on the top left corner and select \"<FaIcons.FaSave /> Save Game\" from the options. You will be alerted that your game has been saved, and now you can take a break or better yet, export and embed your game for everyone else to play!\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li><span id=\"export\" className=\"boldText\">Exporting your game:</span><br />\r\n\t\t\t\t\t\t\t\tChoosing this option means that you want to check how the actual game would look like. Once again, simply open the hamburger menu (<FaIcons.FaBars />) on the top left corner and select \"<FaIcons.FaFileExport /> Export Game\" from the options. This will generate a your game on the server, and once it's done then it will be ready for embedding onto your website!\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li><span id=\"embed\" className=\"boldText\">Embedding your game:</span><br />\r\n\t\t\t\t\t\t\t\tAfter the export process is done, you can finally share your game! You can choose to embed it on your website, or just play the game as is in all its glory. Take note though that you should export the game first for the embed to actually work.\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li><span id=\"logout\" className=\"boldText\">Logging out:</span><br />\r\n\t\t\t\t\t\t\t\tIf you have already done what you need to do or discard your progress and revert it to its last saved state, you can select the logout option.\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h1 id=\"important\">IMPORTANT NOTES!</h1>\r\n\t\t\t\t<hr width=\"50%\" />\r\n\t\t\t\t<div className=\"regulatedWidth\">\r\n\t\t\t\t\t<ol>\r\n\t\t\t\t\t\t<li>Again, make sure to remember your password as the app currently doesn't have any way of recovering forgotten passwords. Please <a className=\"boldText\" href=\"mailto:jdaguila@up.edu.ph\">send an email to the developer</a> if you have forgotten your password for help.</li>\r\n\t\t\t\t\t\t<li>Before saving your game, make sure that you have<span className=\"boldText\">EXPANDED ALL</span> the nodes of your game, as the game engine only saves what is visible on the currently expanded tree.</li>\r\n\t\t\t\t\t</ol>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"spaced\">\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t\t<hr className=\"styled\" width=\"75%\" />\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t</div>\r\n\t\t\t<div id=\"acknowledgement\">\r\n\t\t\t\t<h1 id=\"important\">Acknowledgement</h1>\r\n\t\t\t\t<hr width=\"50%\" />\r\n\t\t\t\t<div className=\"regulatedWidth\">\r\n\t\t\t\t\tI would like to thank Ma'am Katrina Joy Abriol-Santos, for always guiding me and for always giving me ideas for my special problem. I am very grateful for your assistance, and for the opportunity you have given me to create this application.<br /><br />\r\n\t\t\t\t\tI would also like to thank my fellow friends, especially my course mates here in the university who helped me as well. Without them, I would not have the motivation to finish this special problem. Thank you for your support and help throughout my study.<br /><br />\r\n\t\t\t\t\tLastly, I would also like to express my gratitude to my parents who never got tired of encouraging me and providing me support while I was working on my special problem. Without their efforts, I would never have made it to where I am right now.<br /><br />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div id=\"aboutDev\">\r\n\t\t\t\t<h1>About the developer</h1>\r\n\t\t\t\t<hr width=\"50%\" />\r\n\t\t\t\t<div className=\"regulatedWidth\">\r\n\t\t\t\t\t<span className=\"boldText\">Janzen Christian D. Aguila</span> is an undergraduate BS\r\n\t\t\t\t\tComputer Science student at the University at the\r\n\t\t\t\t\tPhilippines Los Baos. He is one of the developers\r\n\t\t\t\t\tfor the Alliance of Computer Science Students - UPLB.\r\n\t\t\t\t\tHe likes to explore web development and\r\n\t\t\t\t\thas worked on different projects involving the use\r\n\t\t\t\t\tof different web development frameworks.\r\n\t\t\t\t\t<hr width=\"50%\" />\r\n\t\t\t\t\tThis application is presented to the\r\n\t\t\t\t\t<div className=\"spaced\">\r\n\t\t\t\t\t\t<a className=\"boldText largeText\" href=\"http://ics.uplb.edu.ph/\" target=\"_blank\" rel=\"noopener noreferrer\">Institute of Computer Science</a><br />\r\n\t\t\t\t\t\t<a href=\"https://cas.uplb.edu.ph/\" target=\"_blank\" rel=\"noopener noreferrer\">College of Arts and Sciences</a><br />\r\n\t\t\t\t\t\t<a href=\"https://www.uplb.edu.ph/index.php/home\" target=\"_blank\" rel=\"noopener noreferrer\">University of the Philippines Los Baos</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\tin partial fulfillment of the requirements for\r\n\t\t\t\t\t\t<div className=\"spaced\">\r\n\t\t\t\t\t\t\t<h3>CMSC 190</h3>\r\n\t\t\t\t\t\t\t<h6>Special Problems</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{str}<br />\r\n\t\t\t<span id=\"end\">You have reached the end of the page.</span>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\n\r\nexport default function Logout() {\r\n\tfunction handleLogout() {\r\n\t\tsessionStorage.setItem(\"token\", \"\");\r\n\t\tsessionStorage.clear();\r\n\t\tdocument.getElementById(\"clickToLogout\").click();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<a href=\"/#\" onClick={handleLogout}>\r\n\t\t\t\tLogout\r\n\t\t\t</a>\r\n\t\t\t<a id=\"clickToLogout\" href=\"/\"> </a>\r\n\t\t</div>\r\n\t);\r\n}","import React, { useState } from 'react';\r\nimport * as FaIcons from \"react-icons/fa\";\r\nimport * as AiIcons from \"react-icons/ai\";\r\nimport * as FiIcons from \"react-icons/fi\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Navbar.css\";\r\nimport { IconContext } from \"react-icons\";\r\n\r\nimport Logout from '../pages/Logout/Logout';\r\n\r\nfunction Navbar() {\r\n\tconst [sidebar, setSidebar] = useState(false);\r\n\r\n\tconst clickSaveGame = () => {\r\n\t\tdocument.getElementById(\"saveTreeLink\").click();\r\n\t}\r\n\r\n\tconst clickExportGame = () => {\r\n\t\tdocument.getElementById(\"exportGameLink\").click();\r\n\t}\r\n\r\n\tconst clickEmbedGame = () => {\r\n\t\tdocument.getElementById(\"embedGameLinkContainer\").click();\r\n\t}\r\n\r\n\tconst showSidebar = () => setSidebar(!sidebar);\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<IconContext.Provider value={{color: \"#fff\"}}>\r\n\t\t\t\t<div className=\"navbar\">\r\n\t\t\t\t\t<Link to=\"#\" className=\"menu-bars\">\r\n\t\t\t\t\t\t<FaIcons.FaBars onClick={showSidebar} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/\" className=\"menu-bars\" style={{color:\"#fff\"}}>\r\n\t\t\t\t\t\t<img src={require(\"../Assets/InitLogo.png\")} alt=\"TextSimEngine\" style={{\"maxHeight\": \"70px\"}}/>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<nav className={sidebar ? \"nav-menu active\" : \"nav-menu\"}>\r\n\t\t\t\t\t<ul className=\"nav-menu-items\" onClick={showSidebar}>\r\n\t\t\t\t\t\t<li className=\"navbar-toggle\">\r\n\t\t\t\t\t\t\t<Link to=\"#\" className=\"menu-bars\">\r\n\t\t\t\t\t\t\t\t<AiIcons.AiOutlineClose />\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t{/*{SidebarData.map((item, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li key={index} className={item.cName}>\r\n\t\t\t\t\t\t\t\t\t<Link to={item.path}>\r\n\t\t\t\t\t\t\t\t\t\t{item.icon}\r\n\t\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}*/}\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"/\">\r\n\t\t\t\t\t\t\t\t<AiIcons.AiFillHome />\r\n\t\t\t\t\t\t\t\t<span>Home</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"/#\" onClick={clickSaveGame}>\r\n\t\t\t\t\t\t\t\t<FaIcons.FaSave />\r\n\t\t\t\t\t\t\t\t<span>Save Game</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"/#\" onClick={clickExportGame}>\r\n\t\t\t\t\t\t\t\t<FaIcons.FaFileExport />\r\n\t\t\t\t\t\t\t\t<span>Export Game</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"/#\" onClick={clickEmbedGame}>\r\n\t\t\t\t\t\t\t\t<FaIcons.FaExternalLinkAlt />\r\n\t\t\t\t\t\t\t\t<span>Embed Game</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a id=\"helpPage\" href=\"/about/engine#help\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t\t\t<FiIcons.FiHelpCircle />\r\n\t\t\t\t\t\t\t\t<span>Help</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"/about/engine\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t\t\t<FaIcons.FaInfoCircle />\r\n\t\t\t\t\t\t\t\t<span>About app</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfks1Id_1n2hIk-4bo7pxs4BQ-xAI-nuqjue4GnY18ybI-s6A/viewform?usp=sf_link\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t\t\t<FaIcons.FaStar />\r\n\t\t\t\t\t\t\t\t<span>Rate the app</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"mailto:jdaguila@up.edu.ph\">\r\n\t\t\t\t\t\t\t\t<FiIcons.FiMail />\r\n\t\t\t\t\t\t\t\t<span>Contact</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<li className=\"nav-text\">\r\n\t\t\t\t\t\t\t<a href=\"/\">\r\n\t\t\t\t\t\t\t\t<FiIcons.FiLogOut />\r\n\t\t\t\t\t\t\t\t<span><Logout /></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</nav>\r\n\t\t\t</IconContext.Provider>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Navbar;","// import React, { Component } from 'react';\r\nimport React from 'react';\r\nimport {/* BrowserRouter, Link,*/ Route, Switch } from 'react-router-dom';\r\n\r\n// import Questions from './Questions/Questions';\r\nimport GameInterface from './pages/GameInterface';\r\nimport Login from './pages/Login/Login';\r\n// import Logout from './pages/Logout/Logout';\r\nimport Signup from './pages/Signup/Signup';\r\n// import NavBar from './NavBar/NavBar';\r\nimport NotFound from './pages/NotFound/NotFound';\r\nimport Embed from './pages/Embed/Embed';\r\nimport About from './pages/About/About';\r\nimport useToken from './useToken';\r\n\r\nimport Navbar from './nav/Navbar';\r\n\r\nfunction App() {\r\n\tconst { token, setToken } = useToken();\r\n\tlet gameNameMod = \"/\" + sessionStorage.getItem(\"gameName\");\r\n\r\n\tif(!token) {\r\n\t\tlet currentYear = new Date().getFullYear();\r\n\t\tconst str = \"Copyright \\u00A9 2019-\" + currentYear + \" Janzen Christian Aguila. All Rights Reserved.\"; // &copy; was initially used\r\n\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path=\"/:id\">\r\n\t\t\t\t\t\t<Embed />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/about/engine\">\r\n\t\t\t\t\t\t<About />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t<div className=\"start\">\r\n\t\t\t\t\t\t\t<div className=\"startItems\" style={{\"width\": \"75%\", \"margin\": \"auto\", \"textAlign\": \"center\", \"marginTop\": \"100px\"}}>\r\n\t\t\t\t\t\t\t\t<div style={{\"marginBottom\": \"50px\"}}><img src={require(\"./Assets/InitLogo.png\")} alt=\"TextSimEngine\" style={{\"maxWidth\": \"100%\", \"maxHeight\": \"100%\"}} /></div>\r\n\t\t\t\t\t\t\t\t<div style={{\"width\": \"100%\", \"display\": \"table\"}}>\r\n\t\t\t\t\t\t\t\t\t<div style={{\"display\": \"table-row\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"fadeItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Signup setToken={setToken} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t&emsp;\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"fadeItems\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Login setToken={setToken} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style={{bottom: \"0\", width: \"100%\", textAlign: \"center\", position: \"absolute\"}}>\r\n\t\t\t\t\t\t\t\t<a href=\"/about/engine\" target=\"_blank\" rel=\"noopener noreferrer\" style={{color:\"#FFF\"}}>About TextSimEngine</a>&emsp;|&emsp;\r\n\t\t\t\t\t\t\t\t<a href=\"https://docs.google.com/forms/d/e/1FAIpQLSfks1Id_1n2hIk-4bo7pxs4BQ-xAI-nuqjue4GnY18ybI-s6A/viewform?usp=sf_link\" target=\"_blank\" rel=\"noopener noreferrer\" style={{color:\"#FFF\"}}>Rate the app</a>&emsp;|&emsp;\r\n\t\t\t\t\t\t\t\t<a href=\"mailto:jdaguila@up.edu.ph\" style={{color:\"#FFF\"}}>Contact the developer</a>\r\n\t\t\t\t\t\t\t\t<p style={{fontSize: \"8px\"}}>{str}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t<GameInterface />\r\n\t\t\t\t\t<a id=\"embedGameLink\" href={ gameNameMod } target=\"_blank\" rel=\"noopener noreferrer\" style={{display:\"none\"}}> </a> {/*this is programatically clicked in Navbar.js*/}\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route exact path=\"/:id\">\r\n\t\t\t\t\t<Embed />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route exact path=\"/about/engine\">\r\n\t\t\t\t\t<About />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route component={ NotFound } />\r\n\t\t\t</Switch>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n// class App extends Component {\r\n// \trender() {\r\n// \t\treturn(\r\n// \t\t\t<div>\r\n// \t\t\t\t<NavBar />\r\n// \t\t\t\t<GameInterface />\r\n// \t\t\t</div>\r\n// \t\t);\r\n// \t}\r\n// }\r\n\r\nexport default App;","import { useState } from 'react';\r\n\r\nexport default function useToken() {\r\n\tconst getToken = () => {\r\n\t\tconst tokenString = sessionStorage.getItem('token');\r\n\t\tconst userToken = JSON.parse(tokenString);\r\n\t\treturn userToken?.token\r\n\t}\r\n\r\n\tconst [token, setToken] = useState(getToken());\r\n\r\n\tconst saveToken = userToken => {\r\n\t\tsessionStorage.setItem(\"token\", JSON.stringify(userToken));\r\n\t\tsetToken(userToken.token);\r\n\t}\r\n\r\n\treturn {\r\n\t\tsetToken: saveToken,\r\n\t\ttoken\r\n\t}\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n\t<BrowserRouter>\r\n\t\t<App />\r\n\t</BrowserRouter>\r\n, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}